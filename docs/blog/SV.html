
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>SV代码风格 · Blog</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="UnisLab-ic-group">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    README
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="SV.html">
            
                <a href="SV.html">
            
                    
                    SV代码风格
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">通用处理器</li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    Ariane(cva6)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                    Rocket Core
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
                <span>
            
                    
                    SonicBOOM
            
                </span>
            

            
        </li>
    

    
        
        <li class="header">AI 芯片</li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <span>
            
                    
                    AI 芯片体系架构
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="AI/AI芯片指标.html">
            
                <a href="AI/AI芯片指标.html">
            
                    
                    AI 芯片指标
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="hardfix/">
            
                <a href="hardfix/">
            
                    
                    硬件定点数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="hardalgo/systolic-array.html">
            
                <a href="hardalgo/systolic-array.html">
            
                    
                    脉动阵列
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">隐私计算</li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    隐私计算数学基础
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
                <span>
            
                    
                    全同态加密
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" >
            
                <span>
            
                    
                    安全多方计算
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" >
            
                <span>
            
                    
                    隐私求交
            
                </span>
            

            
        </li>
    

    
        
        <li class="header">IC-FPGA</li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <span>
            
                    
                    杂谈
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >SV代码风格</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="lowrisc-verilog-coding-style-guide">lowRISC Verilog Coding Style Guide</h1>
<h2 id="basics">Basics</h2>
<h3 id="summary">Summary</h3>
<p>Verilog is the main logic design language for lowRISC Comportable IP.</p>
<p>Verilog and Verilog (often generically referred to as just &quot;Verilog&quot; in
this document) can be written in vastly different styles, which can lead to code
conflicts and code review latency.  This style guide aims to promote Verilog
readability across groups.  To quote the
<a href="https://google.github.io/styleguide/cppguide.html" target="_blank">Google C++ style guide</a>:
&quot;Creating common, required idioms and patterns makes code much easier to
understand.&quot;</p>
<p>This guide defines the Comportable style for Verilog. The goals are to:</p>
<ul>
<li>promote consistency across hardware development projects</li>
<li>promote best practices</li>
<li>increase code sharing and re-use</li>
</ul>
<p>This style guide defines style for both Verilog-2001 and Verilog compliant
code. Additionally, this style guide defines style for both synthesizable and
test bench code.</p>
<p>See the <a href="#appendix---condensed-style-guide">Appendix</a> for a condensed tabular
representation of this style guide.</p>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#lowrisc-verilog-coding-style-guide">lowRISC Verilog Coding Style Guide</a><ul>
<li><a href="#basics">Basics</a><ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#terminology-conventions">Terminology Conventions</a></li>
<li><a href="#default-to-c-like-formatting">Default to C-like Formatting</a></li>
<li><a href="#style-guide-exceptions">Style Guide Exceptions</a></li>
<li><a href="#which-verilog-to-use">Which Verilog to Use</a></li>
</ul>
</li>
<li><a href="#verilogverilog-conventions">Verilog/Verilog Conventions</a><ul>
<li><a href="#summary-1">Summary</a></li>
<li><a href="#file-extensions">File Extensions</a></li>
<li><a href="#general-file-appearance">General File Appearance</a><ul>
<li><a href="#characters">Characters</a></li>
<li><a href="#posix-file-endings">POSIX File Endings</a></li>
<li><a href="#line-length">Line Length</a></li>
<li><a href="#no-tabs">No Tabs</a></li>
<li><a href="#no-trailing-spaces">No Trailing Spaces</a></li>
</ul>
</li>
<li><a href="#begin--end">Begin / End</a></li>
<li><a href="#indentation">Indentation</a><ul>
<li><a href="#indented-sections">Indented Sections</a></li>
<li><a href="#line-wrapping">Line Wrapping</a></li>
<li><a href="#preprocessor-directives">Preprocessor Directives</a></li>
</ul>
</li>
<li><a href="#spacing">Spacing</a><ul>
<li><a href="#comma-delimited-lists">Comma-delimited Lists</a></li>
<li><a href="#tabular-alignment">Tabular Alignment</a></li>
<li><a href="#expressions">Expressions</a></li>
<li><a href="#array-dimensions-in-declarations">Array Dimensions in Declarations</a></li>
<li><a href="#parameterized-types">Parameterized Types</a></li>
<li><a href="#labels">Labels</a></li>
<li><a href="#case-items">Case items</a></li>
<li><a href="#function-and-task-calls">Function And Task Calls</a></li>
<li><a href="#macro-calls">Macro Calls</a></li>
<li><a href="#line-continuation">Line Continuation</a></li>
<li><a href="#space-around-keywords">Space Around Keywords</a></li>
</ul>
</li>
<li><a href="#parentheses">Parentheses</a><ul>
<li><a href="#ternary-expressions">Ternary Expressions</a></li>
</ul>
</li>
<li><a href="#comments">Comments</a></li>
<li><a href="#declarations">Declarations</a></li>
<li><a href="#basic-template">Basic Template</a></li>
</ul>
</li>
<li><a href="#naming">Naming</a><ul>
<li><a href="#summary-2">Summary</a></li>
<li><a href="#constants">Constants</a><ul>
<li><a href="#parameterized-objects-modules-etc">Parameterized Objects (modules, etc.)</a></li>
</ul>
</li>
<li><a href="#macro-definitions">Macro Definitions</a></li>
<li><a href="#suffixes">Suffixes</a></li>
<li><a href="#enumerations">Enumerations</a></li>
<li><a href="#signal-naming">Signal Naming</a><ul>
<li><a href="#use-descriptive-names">Use descriptive names</a></li>
<li><a href="#prefixes">Prefixes</a></li>
<li><a href="#hierarchical-consistency">Hierarchical consistency</a></li>
</ul>
</li>
<li><a href="#clocks">Clocks</a></li>
<li><a href="#resets">Resets</a></li>
</ul>
</li>
<li><a href="#language-features">Language Features</a><ul>
<li><a href="#preferred-verilog-constructs">Preferred Verilog Constructs</a></li>
<li><a href="#package-dependencies">Package Dependencies</a></li>
<li><a href="#module-declaration">Module Declaration</a></li>
<li><a href="#module-instantiation">Module Instantiation</a></li>
<li><a href="#constants-1">Constants</a></li>
<li><a href="#signal-widths">Signal Widths</a><ul>
<li><a href="#always-be-explicit-about-the-widths-of-number-literals">Always be explicit about the widths of number literals.</a></li>
<li><a href="#port-connections-on-module-instances-must-always-match-widths-correctly">Port connections on module instances must always match widths correctly.</a></li>
<li><a href="#do-not-use-multi-bit-signals-in-a-boolean-context">Do not use multi-bit signals in a boolean context.</a></li>
<li><a href="#bit-slicing">Bit Slicing</a></li>
<li><a href="#handling-width-overflow">Handling Width Overflow</a></li>
</ul>
</li>
<li><a href="#blocking-and-non-blocking-assignments">Blocking and Non-blocking Assignments</a></li>
<li><a href="#delay-modeling">Delay Modeling</a></li>
<li><a href="#sequential-logic-latches">Sequential Logic (Latches)</a></li>
<li><a href="#sequential-logic-registers">Sequential Logic (Registers)</a></li>
<li><a href="#dont-cares-xs">Don&apos;t Cares (<code>X</code>&apos;s)</a><ul>
<li><a href="#catching-errors-where-invalid-values-are-consumed">Catching errors where invalid values are consumed</a></li>
<li><a href="#specific-guidance-on-case-statements-and-ternaries">Specific Guidance on Case Statements and Ternaries</a></li>
<li><a href="#dynamic-array-indexing">Dynamic Array Indexing</a></li>
</ul>
</li>
<li><a href="#combinational-logic">Combinational Logic</a></li>
<li><a href="#case-statements">Case Statements</a><ul>
<li><a href="#wildcards-in-case-items">Wildcards in case items</a></li>
</ul>
</li>
<li><a href="#generate-constructs">Generate Constructs</a></li>
<li><a href="#signed-arithmetic">Signed Arithmetic</a></li>
<li><a href="#number-formatting">Number Formatting</a></li>
<li><a href="#functions-and-tasks">Functions and Tasks</a></li>
<li><a href="#problematic-language-features-and-constructs">Problematic Language Features and Constructs</a><ul>
<li><a href="#floating-begin-end-blocks">Floating begin-end blocks</a></li>
<li><a href="#hierarchical-references">Hierarchical references</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#design-conventions">Design Conventions</a><ul>
<li><a href="#summary-3">Summary</a></li>
<li><a href="#declare-all-signals">Declare all signals</a></li>
<li><a href="#use-logic-for-synthesis">Use <code>logic</code> for synthesis</a></li>
<li><a href="#logical-vs-bitwise">Logical vs. Bitwise</a></li>
<li><a href="#packed-ordering">Packed Ordering</a></li>
<li><a href="#unpacked-ordering">Unpacked Ordering</a></li>
<li><a href="#finite-state-machines">Finite State Machines</a></li>
<li><a href="#active-low-signals">Active-Low Signals</a></li>
<li><a href="#differential-pairs">Differential Pairs</a></li>
<li><a href="#delays">Delays</a></li>
<li><a href="#wildcard-import-of-packages">Wildcard import of packages</a></li>
<li><a href="#assertion-macros">Assertion Macros</a><ul>
<li><a href="#a-note-on-security-critical-applications">A Note on Security Critical Applications</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#appendix---condensed-style-guide">Appendix - Condensed Style Guide</a><ul>
<li><a href="#basic-style-elements">Basic Style Elements</a></li>
<li><a href="#construct-naming">Construct Naming</a></li>
<li><a href="#suffixes-for-signals-and-types">Suffixes for signals and types</a></li>
<li><a href="#language-features-1">Language features</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="terminology-conventions">Terminology Conventions</h3>
<p>Unless otherwise noted, the following terminology conventions apply to this
style guide:</p>
<ul>
<li>The word <strong><em>must</em></strong> indicates a mandatory requirement. Similarly, <strong><em>do
not</em></strong> indicates a prohibition. Imperative and declarative statements
correspond to <strong><em>must</em></strong>.</li>
<li>The word <strong><em>recommended</em></strong> indicates that a certain course of action is
preferred or is most suitable. Similarly, <strong><em>not recommended</em></strong> indicates
that a course of action is unsuitable, but not prohibited. There may be
reasons to use other options, but the implications and reasons for doing so
must be fully understood.</li>
<li>The word <strong><em>may</em></strong> indicates a course of action is permitted and optional.</li>
<li>The word <strong><em>can</em></strong> indicates a course of action is possible given material,
physical, or causal constraints.</li>
</ul>
<h3 id="default-to-c-like-formatting">Default to C-like Formatting</h3>
<p><strong><em>Where appropriate, format code consistent with
<a href="https://google.github.io/styleguide/cppguide.html" target="_blank">https://google.github.io/styleguide/cppguide.html</a></em></strong></p>
<p>Verilog is a C-like language, and where appropriate, we default to being
consistent with
<a href="https://google.github.io/styleguide/cppguide.html" target="_blank">Google&apos;s C++ Style Guide</a>.</p>
<p>In particular, we inherit these specific formatting guidelines:</p>
<ul>
<li>Generally, <a href="#naming">names</a> should be descriptive and avoid abbreviations.</li>
<li>Non-ASCII characters are forbidden.</li>
<li>Indentation uses spaces, no tabs. Indentation is two spaces for nesting,
four spaces for line continuation.</li>
<li>Place a space between <code>if</code> and the parenthesis in
<a href="https://google.github.io/styleguide/cppguide.html#Conditionals" target="_blank">conditional expressions</a>.</li>
<li>Use horizontal whitespace around operators, and avoid trailing
whitespace at the end of lines.</li>
<li>Maintain consistent and good
<a href="https://google.github.io/styleguide/cppguide.html#Punctuation,_Spelling_and_Grammar" target="_blank">punctuation, spelling, and grammar</a>
(within comments).</li>
<li>Use standard formatting for <a href="#comments">comments</a>, including C-like formatting for <a href="https://google.github.io/styleguide/cppguide.html#TODO_Comments" target="_blank">TODO</a> and <a href="https://google.github.io/styleguide/cppguide.html#Deprecation_Comments" target="_blank">deprecation</a>.</li>
</ul>
<h3 id="style-guide-exceptions">Style Guide Exceptions</h3>
<p><strong><em>Justify all exceptions with a comment.</em></strong></p>
<p>No style guide is perfect. There are times when the best path to a working
design, or for working around a tool issue, is to simply cut the Gordian Knot
and create code that is at variance with this style guide. It is always okay to
deviate from the style guide by necessity, as long as that necessity is clearly
justified by a brief comment, as well as a lint waiver pragma where appropriate.</p>
<h3 id="which-verilog-to-use">Which Verilog to Use</h3>
<p><strong><em>Prefer Verilog-2017.</em></strong></p>
<p>All RTL and tests should be developed in Verilog, following the
<a href="https://ieeexplore.ieee.org/document/8299595" target="_blank">IEEE 1800-2017 (Verilog-2017) standard</a>, except for <a href="#problematic-language-features-and-constructs">prohibited features</a>.</p>
<p>The standards document is available free of cost through <a href="https://ieeexplore.ieee.org/browse/standards/get-program/page/series?id=80" target="_blank">IEEE GET</a> (a registration is required).</p>
<h2 id="verilogverilog-conventions">Verilog/Verilog Conventions</h2>
<h3 id="summary">Summary</h3>
<p>This section addresses primarily aesthetic aspects of style: line length,
indentation, spacing, etc.</p>
<h3 id="file-extensions">File Extensions</h3>
<p><strong><em>Use the <code>.sv</code> extension for Verilog files (or <code>.svh</code> for files
that are included via the preprocessor).</em></strong></p>
<p>File extensions have the following meanings:</p>
<ul>
<li><code>.sv</code> indicates a Verilog file defining a module or package.</li>
<li><code>.svh</code> indicates a Verilog header file intended to be included in
another file using a preprocessor <code>`include</code> directive.</li>
<li><code>.v</code> indicates a Verilog-2001 file defining a module or package.</li>
<li><code>.vh</code> indicates a Verilog-2001 header file.</li>
</ul>
<p>Only <code>.sv</code> and <code>.v</code> files are intended to be compilation units. <code>.svh</code> and <code>.vh</code>
files may only be <code>`include</code>-ed into other files.</p>
<p>With exceptions of netlist files, each .sv or .v file should contain only one
module, and the name should be associated. For instance, file <code>foo.sv</code> should
contain only the module <code>foo</code>.</p>
<h3 id="general-file-appearance">General File Appearance</h3>
<h4 id="characters">Characters</h4>
<p><strong><em>Use only ASCII characters with UNIX-style line endings(<code>&quot;\n&quot;</code>).</em></strong></p>
<h4 id="posix-file-endings">POSIX File Endings</h4>
<p><strong><em>All lines on non-empty files must end with a newline (<code>&quot;\n&quot;</code>).</em></strong></p>
<h4 id="line-length">Line Length</h4>
<p><strong><em>Wrap the code at 100 characters per line.</em></strong></p>
<p>The maximum line length for style-compliant Verilog code is 100 characters per
line.</p>
<p>Exceptions:</p>
<ul>
<li>Any place where line wraps are impossible (for example, an include path
might extend past 100 characters).</li>
</ul>
<p><a href="#line-wrapping">Line-wrapping</a> contains additional guidelines on how to wrap
long lines.</p>
<h4 id="no-tabs">No Tabs</h4>
<p><strong><em>Do not use tabs anywhere.</em></strong></p>
<p>Use spaces to indent or align text. See <a href="#indentation">Indentation</a> for rules
about indentation and wrapping.</p>
<p>To convert tabs to spaces on any file, you can use the
<a href="http://linux.die.net/man/1/expand" target="_blank">UNIX <code>expand</code></a> utility.</p>
<h4 id="no-trailing-spaces">No Trailing Spaces</h4>
<p><strong><em>Delete trailing whitespace at the end of lines.</em></strong></p>
<h3 id="begin--end">Begin / End</h3>
<p><strong><em>Use <code>begin</code> and <code>end</code> unless the whole statement fits on a single line.</em></strong></p>
<p>If a statement wraps at a block boundary, it must use <code>begin</code> and <code>end.</code> Only if
a whole semicolon-terminated statement fits on a single line can <code>begin</code> and
<code>end</code> be omitted.</p>
<p>&#x1F44D;
```verilog {.good}
// Wrapped procedural block requires begin and end.
always_ff @(posedge clk) begin
  q &lt;= d;
end</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
// The exception case, where begin and end may be omitted as the entire
// structure fits on a single line.
always_ff @(posedge clk) q &lt;= d;
</code></pre><p>&#x1F44E;
```verilog {.bad}
// Incorrect because a wrapped statement must have begin and end.
always_ff @(posedge clk)
  q &lt;= d;</p>
<pre class="language-"><code>
`begin` must be on the same line as the preceding keyword, and ends the line.
`end` must start a new line. `end else begin` must be together on one line. The
only exception is if `end` has a label, a following `else` should be on a new
line.

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
// &quot;end else begin&quot; are on the same line.
if (condition) begin
  foo = bar;
end else begin
  foo = bum;
end
</code></pre><p>&#x1F44D;
```verilog {.good}
// begin/end are omitted because each semicolon-terminated statement fits on
// a single line.
if (condition) foo = bar;
else foo = bum;</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
// Incorrect because &quot;else&quot; must be on the same line as &quot;end&quot;.
if (condition) begin
  foo = bar;
end
else begin
  foo = bum;
end
</code></pre><p>&#x1F44D;
```verilog {.good}
// An exception is made for labeled blocks.
if (condition) begin : a
  foo = bar;
end : a
else begin : b
  foo = bum;
end : b</p>
<pre class="language-"><code>
The above style also applies to individual case items within a case statement.
`begin` and `end` may be omitted if the entire case item (the case expression
and the associated statement) fits on a single line. Otherwise, use the `begin`
keyword on the same line as the case expression.

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
// Consistent use of begin and end for each case item is good.
unique case (state_q)
  StIdle: begin
    state_d = StA;
  end
  StA: begin
    state_d = StB;
  end
  StB: begin
    state_d = StIdle;
    foo = bar;
  end
  default: begin
    state_d = StIdle;
  end
endcase
</code></pre><p>&#x1F44D;
```verilog {.good}
// Case items that fit on a single line may omit begin and end.
unique case (state_q)
  StIdle: state_d = StA;
  StA: state_d = StB;
  StB: begin
    state_d = StIdle;
    foo = bar;
  end
  default: state_d = StIdle;
endcase</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
unique case (state_q)
  StIdle:           // These lines are incorrect because we should not wrap
    state_d = StA;  // case items at a block boundary without using begin
  StA:              // and end.  Case items should fit on a single line, or
    state_d = StB;  // else the procedural block must have begin and end.
  StB: begin
    foo = bar;
    state_d = StIdle;
  end
  default: begin
    state_d = StIdle;
  end
endcase
</code></pre><h3 id="indentation">Indentation</h3>
<p><strong><em>Indentation is two spaces per level.</em></strong></p>
<p>Use spaces for indentation. Do not use tabs. You should set your editor to emit
spaces when you hit the tab key.</p>
<h4 id="indented-sections">Indented Sections</h4>
<p>Always add an additional level of indentation to the enclosed sections of all
paired keywords. Examples of Verilog keyword pairs: <code>begin / end</code>,
<code>module / endmodule</code>, <code>package / endpackage</code>, <code>class / endclass</code>,
<code>function / endfunction</code>.</p>
<h4 id="line-wrapping">Line Wrapping</h4>
<p>When wrapping a long expression, indent the continued part of the expression by
four spaces, like this:</p>
<p>&#x1F44D;
```verilog {.good}
assign zulu = enabled &amp;&amp; (
    alpha &lt; bravo &amp;&amp;
    charlie &lt; delta
);</p>
<p>assign addr = addr_gen_function_with_many_params(
    thing, other_thing, long_parameter_name, x, y,
    extra_param1, extra_param2
);</p>
<p>assign structure = &apos;{
    src: src,
    dest: dest,
    default: &apos;0
};</p>
<pre class="language-"><code>
Or, if it improves readability, align the continued part of the expression with
a grouping open parenthesis or brace, like this:

:+1:
```verilog {.good}
assign zulu = enabled &amp;&amp; (alpha &lt; bravo &amp;&amp;
                          charlie &lt; delta);

assign addr = addr_gen_function(thing, other_thing,
                                long_parameter_name,
                                x, y);

assign structure = &apos;{src: src,
                     dest: dest,
                     default: &apos;0};
</code></pre><p>Operators in a wrapped expression can be placed at either the end or the
beginning of each line, but this must be done consistently within a file.</p>
<p>Open syntax characters such as <code>{</code> or <code>(</code> that end one line of a multi-line
expression should be terminated with close characters (<code>}</code>, <code>)</code>) on their
own line. Examples:</p>
<p>:+1:
```verilog {.good}
assign bus_concatenation = {
    bus_valid,
    bus_parity[7:0],
    bus_valid[63:0]
};</p>
<p>inst_type inst_name1 (
  .clk_i       (clk),
  .data_valid_i(data_valid),
  .data_value_i(data_value),
  .data_ready_o(data_ready)
);</p>
<pre class="language-"><code>
#### Preprocessor Directives

***Keep branching preprocessor directives left-aligned and un-indented.***

Keep branching preprocessor directives (`` `ifdef``, `` `ifndef``, `` `else``,
`` `elsif``, `` `endif``) aligned to the left, even if they are nested. Indent
the conditional branches of text as if the preprocessor directives were absent.
Non-branching preprocessor directives must follow the same indentation rules as
the regular code.

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
package foo;
`ifdef FOO              // good: branching directive left-aligned
  `include &quot;foo.sv&quot;;    // normal indentation for non-branching directives
  parameter bit A = 1;  // normal indentation for the regular code
`ifdef BAR              // good: branching directive left-aligned
  parameter bit A = 2;
`else
  parameter bit A = 3;
`endif
`endif
endpackage : foo
</code></pre><p>Un-indented branching preprocessor directives disrupt the flow of reading to
emphasize that there is conditional text. Leaving conditional branch text
un-indented will result in post-preprocessed text looking properly indented.</p>
<h3 id="spacing">Spacing</h3>
<h4 id="comma-delimited-lists">Comma-delimited Lists</h4>
<p><strong><em>For multiple items on a line, one space must separate the comma and
the next character.</em></strong></p>
<p>Additional whitespace is allowed for readability.</p>
<p>&#x1F44D;
```verilog {.good}
bus = {addr, parity, data};
a = myfunc(lorem, ipsum, dolor, sit, amet, consectetur, adipiscing, elit,
           rhoncus);
mymodule mymodule(.a(a), .b(b));</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
{parity,data} = bus;
a = myfunc(a,b,c);
mymodule mymodule(.a(a),.b(b));
</code></pre><h4 id="tabular-alignment">Tabular Alignment</h4>
<p>Tabular alignment groups two or more similar lines so that the identical parts are directly above one another.
This alignment makes it easy to see which characters are the same and which characters are different between lines.</p>
<p><strong><em>The use of tabular alignment is generally encouraged.</em></strong></p>
<p><strong><em>The use of tabular alignment is required for some constructs as detailed in the corresponding subsection of this guide.</em></strong></p>
<p>Constructs which require tabular alignment:</p>
<ul>
<li><a href="#module-instantiation">Port expressions in module instantiations</a></li>
</ul>
<p>Each block of code, separated by an empty line, is treated as separate &quot;table&quot;.</p>
<p>Use spaces, not tabs.</p>
<p>For example:</p>
<p>:+1:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>  my_interface_data<span class="token punctuation">;</span>
<span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> my_interface_address<span class="token punctuation">;</span>
<span class="token keyword">logic</span>        my_interface_enable<span class="token punctuation">;</span>

<span class="token keyword">logic</span>       another_signal<span class="token punctuation">;</span>
<span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> something_else<span class="token punctuation">;</span>
</code></pre>
<p>:+1:</p>
<pre class="language-"><code class="lang-verilog">mod u_mod <span class="token punctuation">(</span>
  <span class="token punctuation">.</span>clk_i<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>rst_ni<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>sig_i          <span class="token punctuation">(</span>my_signal_in<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>sig2_i         <span class="token punctuation">(</span>my_signal_out<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// comment with no blank line maintains the block</span>
  <span class="token punctuation">.</span><span class="token function">in_same_block_i</span><span class="token punctuation">(</span>my_signal_in<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>sig3_i         <span class="token punctuation">(</span>something<span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token punctuation">.</span><span class="token function">in_another_block_i</span><span class="token punctuation">(</span>my_signal_in<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>sig4_i            <span class="token punctuation">(</span>something<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="expressions">Expressions</h4>
<p><strong><em>Include whitespace on both sides of all binary operators.</em></strong></p>
<p>Use spaces around binary operators. Add sufficient whitespace to aid
readability.</p>
<p>For example:</p>
<p>&#x1F44D;
```verilog {.good}
assign a = ((addr &amp; mask) == My_addr) ? b[1] : ~b[0];  // good</p>
<pre class="language-"><code>
is better than

<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
assign a=((addr&amp;mask)==My_addr)?b[1]:~b[0];  // bad
</code></pre><p><strong>Exception:</strong> when declaring a bit vector, it is acceptable to use the compact
notation. For example:</p>
<p>&#x1F44D;
```verilog {.good}
wire [WIDTH-1:0] foo;   // this is acceptable
wire [WIDTH - 1 : 0] foo;  // fine also, but not necessary</p>
<pre class="language-"><code>
When splitting alternation expressions into multiple lines, use a format that is
similar to an equivalent if-then-else line. For example:

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
assign a = ((addr &amp; mask) == `MY_ADDRESS) ?
           matches_value :
           doesnt_match_value;
</code></pre><h4 id="array-dimensions-in-declarations">Array Dimensions in Declarations</h4>
<p>Add a space around packed dimensions.</p>
<p>Do not add a space:</p>
<ul>
<li>between identifier and unpacked dimensions.</li>
<li>between multiple dimensions.</li>
</ul>
<p>Applies to packed and unpacked arrays as well as dynamic arrays, associative
arrays, and queues.</p>
<p>&#x1F44D;
```verilog {.good}
logic [7:0][3:0] data[128][2];
typedef logic [31:0] word_t;
bit bit_array[512];
data_t some_array[];
data_t some_map[addr_t];
data_t some_q[$];</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
// There must not be a space between dimensions.
logic [7:0] [3:0] data[128] [2];
// There must be a space around packed dimensions.
typedef logic[31:0]word_t;
// There must not be a space between identifier and unpacked dimension.
bit bit_array [512];
// Dynamic, associative, and queue &quot;dimensions&quot; are treated the same as unpacked
// dimensions.  There must not be a space.
data_t some_array [];
data_t some_map [addr_t];
data_t some_q [$];
</code></pre><h4 id="parameterized-types">Parameterized Types</h4>
<p><strong><em>Add one space before type parameters, except when the type is part
of a qualified name.</em></strong></p>
<p>A qualified name contains at least one scope <code>::</code> operator connecting its
segments. A space in a qualified name would break the continuity of a reference
to one symbol, so it must not be added. Parameter lists must follow the
<a href="#comma-delimited-lists">space-after-comma</a> rule.</p>
<p>&#x1F44D;
```verilog {.good}
my_fifo #(.WIDTH(4), .DEPTH(2)) my_fifo_nibble ...</p>
<p>class foo extends bar #(32, 8);  // unqualified base class
  ...
endclass</p>
<p>foo_h = my_class#(.X(1), .Y(0))::type_id::create(&quot;foo_h&quot;);  // static method call</p>
<p>my_pkg::x_class#(8, 1) bar;  // package-qualified name</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
my_fifo#(.WIDTH(4), .DEPTH(2)) my_fifo_2by4 ...

class foo extends bar#(32, 8);  // unqualified base class
  ...
endclass

foo_h = my_class #(.X(1), .Y(0))::type_id::create(&quot;foo_h&quot;);  // static method call

my_pkg::x_class #(8, 1) bar;  // package-qualified name
</code></pre><h4 id="labels">Labels</h4>
<p><strong><em>When labeling code blocks, add one space before and after the colon.</em></strong></p>
<p>For example:</p>
<p>&#x1F44D;
```verilog {.good}
begin : foo
end : foo</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
end:bar            // There must be a space before and after the colon.
endmodule: foobar  // There must be a space before the colon.
</code></pre><h4 id="case-items">Case items</h4>
<p>There must be no whitespace before a case item&apos;s colon; there must be at least
one space after the case item&apos;s colon.</p>
<p>The <code>default</code> case item must include a colon.</p>
<p>For example:</p>
<p>&#x1F44D;
```verilog {.good}
unique case (my_state)
  StInit:   $display(&quot;Shall we begin&quot;);
  StError:  $display(&quot;Oh boy this is Bad&quot;);
  default: begin
    my_state = StInit;
    interrupt = 1;
  end
endcase</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
unique case (1&apos;b1)
  (my_state == StError)  : interrupt = 1; // Excess whitespace before colon
  default:begin end                       // Missing space after colon
endcase
</code></pre><h4 id="function-and-task-calls">Function And Task Calls</h4>
<p><strong><em>Function and task calls must not have any spaces between the function
name or task name and the open parenthesis.</em></strong></p>
<p>For example:</p>
<p>&#x1F44D;
```verilog {.good}
process_packet(pkt);</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
process_packet (pkt);  // There must not be a space before &quot;(&quot;
</code></pre><h4 id="macro-calls">Macro Calls</h4>
<p><strong><em>Macro calls must not have any spaces between the macro name and the
open parenthesis.</em></strong></p>
<p>For example:</p>
<p>&#x1F44D;
<code>``verilog {.good}</code>uvm_error(ID, &quot;you fail&quot;)
`ASSERT(name, a &amp; b, clk, rst)</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
`uvm_error (ID, &quot;you fail&quot;)  // There must not be a space before &quot;(&quot;
`ASSERT (name, a &amp; b, clk, rst)
</code></pre><h4 id="line-continuation">Line Continuation</h4>
<p><strong><em>It is mandatory to right-align line continuations.</em></strong></p>
<p>Aligning line continuations (&apos;<code>\</code>&apos; character) helps visually mark the end of a
multi-line macro. The position of alignment only needs to be beyond the
rightmost extent of a multi-line macro by at least one space, when a space does
not split a token, but should not exceed the maximum line length.</p>
<pre class="language-"><code class="lang-verilog"><span class="token constant">`define</span> <span class="token function">REALLY_LONG_MACRO</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3<span class="token punctuation">)</span> \
    <span class="token function">do_something</span><span class="token punctuation">(</span>arg1<span class="token punctuation">)</span><span class="token punctuation">;</span>                     \
    <span class="token function">do_something_else</span><span class="token punctuation">(</span>arg2<span class="token punctuation">)</span><span class="token punctuation">;</span>                \
    <span class="token function">final_action</span><span class="token punctuation">(</span>arg3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="space-around-keywords">Space Around Keywords</h4>
<p><strong><em>Include whitespace before and after Verilog keywords.</em></strong></p>
<p>Do not include a whitespace:</p>
<ul>
<li>before keywords that immediately follow a group opening, such as an open
parenthesis.</li>
<li>before a keyword at the beginning of a line.</li>
<li>after a keyword at the end of a line.</li>
</ul>
<p>For example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token comment">// Normal indentation before if.  Include a space after if.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token keyword">begin</span>
<span class="token keyword">end</span>
<span class="token comment">// Include a space after always, but not before posedge.</span>
<span class="token important">always_ff @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span> <span class="token keyword">begin</span>
<span class="token keyword">end</span>
</code></pre>
<h3 id="parentheses">Parentheses</h3>
<p><strong><em>Use parentheses to make operations unambiguous.</em></strong></p>
<p>In any instance where a reasonable human would need to expend thought or refer
to an operator precedence chart, use parentheses instead to make the order of
operations unambiguous.</p>
<h4 id="ternary-expressions">Ternary Expressions</h4>
<p><strong><em>Ternary expressions nested in the true condition of another ternary
expression must be enclosed in parentheses.</em></strong></p>
<p>For example:</p>
<p>&#x1F44D;
```verilog {.good}
assign foo = condition_a ? (condition_a_x ? x : y) : b;</p>
<pre class="language-"><code>
While the following nested ternary has only one meaning to the compiler, the
meaning can be unclear and error-prone to humans:

<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
assign foo = condition_a ? condition_a_x ? x : y : b;
</code></pre><p><strong><em>Parentheses may be omitted if the code formatting conveys the same
information, for example when describing a priority mux.</em></strong></p>
<p>&#x1F44D;
```verilog {.good}
assign foo = condition_a ? a :
             condition_b ? b : not_a_nor_b;</p>
<pre class="language-"><code>
### Comments

***C++ style comments (`// foo`) are preferred. C style comments
(`/* bar */`) can also be used.***

A comment on its own line describes the code that follows. A comment on a line
with code describes that line of code.

For example:

```verilog
// This comment describes the following module.
module foo;
  ...
endmodule : foo

localparam bit ValBaz = 1;  // This comment describes the item to the left.
</code></pre><p>It can sometimes be useful to structure the code using header-style comments in
order to separate different functional parts (like FSMs, the main datapath or
registers) within a module. In that case, the preferred style is a single-line
section name, framed with <code>//</code> C++ style comments as follows:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">module</span> foo<span class="token punctuation">;</span>

  <span class="token comment">////////////////</span>
  <span class="token comment">// Controller //</span>
  <span class="token comment">////////////////</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

  <span class="token comment">///////////////////////</span>
  <span class="token comment">// Main ALU Datapath //</span>
  <span class="token comment">///////////////////////</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">endmodule</span> <span class="token punctuation">:</span> foo
</code></pre>
<p>If the designer would like to use comments to mark the beginning/end of a
particular section for better readability (e.g. in nested for loop blocks), the
preferred way is to use a single-line comment with no extra delineators, as
shown in the examples below.</p>
<p>&#x1F44D;
```verilog {.good}
// begin: iterate over foobar
for (...) begin
...
end
// end: iterate over foobar</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
for (...) begin // iterate over foobar
...
end // iterate over foobar
</code></pre><p>&#x1F44E;
```verilog {.bad}
//-------------------------- iterate over foobar -------------------------------
for (...) begin
...
end
//-------------------------- iterate over foobar -------------------------------</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
///////////////////////////////
// begin iterate over foobar //
///////////////////////////////
for (...) begin
...
end
///////////////////////////////
// end iterate over foobar   //
///////////////////////////////
</code></pre><h3 id="declarations">Declarations</h3>
<p><strong><em>Signals must be declared before they are used. This means that
implicit net declarations must not be used.</em></strong></p>
<p>Within modules, it is <strong>recommended</strong> that signals, types, enums, and
localparams be declared close to their first use. This makes it easier for the
reader to find the declaration and see the signal type.</p>
<h3 id="basic-template">Basic Template</h3>
<p><strong><em>A template that demonstrates many of the items is given below.</em></strong></p>
<p>Template:</p>
<pre class="language-"><code class="lang-verilog"><span class="token comment">// Copyright lowRISC contributors.</span>
<span class="token comment">// Licensed under the Apache License, Version 2.0, see LICENSE for details.</span>
<span class="token comment">// SPDX-License-Identifier: Apache-2.0</span>
<span class="token comment">//</span>
<span class="token comment">// One line description of the module</span>

<span class="token keyword">module</span> my_module #<span class="token punctuation">(</span>
  <span class="token keyword">parameter</span> Width <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span>
  <span class="token keyword">parameter</span> Height <span class="token operator">=</span> <span class="token number">24</span>
<span class="token punctuation">)</span> <span class="token punctuation">(</span>
  <span class="token keyword">input</span>              clk_i<span class="token punctuation">,</span>
  <span class="token keyword">input</span>              rst_ni<span class="token punctuation">,</span>
  <span class="token keyword">input</span>              req_valid_i<span class="token punctuation">,</span>
  <span class="token keyword">input</span>  <span class="token punctuation">[</span>Width<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> req_data_i<span class="token punctuation">,</span>
  <span class="token keyword">output</span>             req_ready_o<span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">logic</span> <span class="token punctuation">[</span>Width<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> req_data_masked<span class="token punctuation">;</span>

  submodule u_submodule <span class="token punctuation">(</span>
    <span class="token punctuation">.</span>clk_i<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>rst_ni<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>req_valid_i<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>req_data_i <span class="token punctuation">(</span>req_data_masked<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">req_ready_o</span><span class="token punctuation">(</span>req_ready<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token important">always_comb</span> <span class="token keyword">begin</span>
    req_data_masked <span class="token operator">=</span> req_data_i<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>fsm_state_q<span class="token punctuation">)</span>
      ST_IDLE<span class="token punctuation">:</span> <span class="token keyword">begin</span>
        req_data_masked <span class="token operator">=</span> req_data_i <span class="token operator">&amp;</span> MASK_IDLE<span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">end</span>

  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">endmodule</span>
</code></pre>
<h2 id="naming">Naming</h2>
<h3 id="summary">Summary</h3>
<table>
<thead>
<tr>
<th>Construct</th>
<th>Style</th>
</tr>
</thead>
<tbody>
<tr>
<td>Declarations (module, class, package, interface)</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>Instance names</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>Signals (nets and ports)</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>Variables, functions, tasks</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>Named code blocks</td>
<td><code>lower_snake_case</code></td>
</tr>
<tr>
<td>`define macros</td>
<td><code>ALL_CAPS</code></td>
</tr>
<tr>
<td>Tunable parameters for parameterized modules, classes, and interfaces</td>
<td><code>UpperCamelCase</code></td>
</tr>
<tr>
<td>Constants</td>
<td><code>ALL_CAPS</code> or <code>UpperCamelCase</code></td>
</tr>
<tr>
<td>Enumeration types</td>
<td><code>lower_snake_case_e</code></td>
</tr>
<tr>
<td>Other typedef types</td>
<td><code>lower_snake_case_t</code></td>
</tr>
<tr>
<td>Enumerated value names</td>
<td><code>UpperCamelCase</code></td>
</tr>
</tbody>
</table>
<h3 id="constants">Constants</h3>
<p><strong><em>Declare global constants using parameters in the project package file.</em></strong></p>
<p>In this context, <strong>constants</strong> are distinct from tuneable parameters for objects
such as parameterized modules, classes, etc.</p>
<p>Explicitly declare the type for constants.</p>
<p>When declaring a constant:</p>
<ul>
<li>within a package use <code>parameter</code>.</li>
<li>within a module or class use <code>localparam</code>.</li>
</ul>
<p>The preferred method of defining constants is to declare a <code>package</code> and declare
all constants as a <code>parameter</code> within that package. If the constants are to be
used in only one file, it is acceptable to keep them defined within that file
rather than a separate package.</p>
<p>Define project-wide constants in the project&apos;s main package.</p>
<p>Other packages may also be declared with their own <code>parameter</code> constants to
facilitate the creation of IP that may be re-used across many projects.</p>
<p>The preferred naming convention for all immutable constants is to use <code>ALL_CAPS</code>, but there are times when the use of <code>UpperCamelCase</code> might be considered more natural.</p>
<table>
<thead>
<tr>
<th>Constant Type</th>
<th>Style Preference</th>
<th>Conversation</th>
</tr>
</thead>
<tbody>
<tr>
<td>`define</td>
<td><code>ALL_CAPS</code></td>
<td>Truly constant</td>
</tr>
<tr>
<td>module parameter</td>
<td><code>UpperCamelCase</code></td>
<td>truly modifiable by instantiation, not constant</td>
</tr>
<tr>
<td>derived localparam</td>
<td><code>UpperCamelCase</code></td>
<td>while not modified directly, still tracks module parameter</td>
</tr>
<tr>
<td>tuneable localparam</td>
<td><code>UpperCamelCase</code></td>
<td>while not expected to change upon final RTL version, is used by designer to explore the design space conveniently</td>
</tr>
<tr>
<td>true localparam constant</td>
<td><code>ALL_CAPS</code></td>
<td>Example <code>localparam OP_JALR = 8&apos;hA0;</code></td>
</tr>
<tr>
<td>enum member true constant</td>
<td><code>ALL_CAPS</code></td>
<td>Example <code>typedef enum ... { OP_JALR = 8&apos;hA0;</code></td>
</tr>
<tr>
<td>enum set member</td>
<td><code>ALL_CAPS</code> or <code>UpperCamelCase</code></td>
<td>Example <code>typedef enum ... { ST_IDLE, ST_FRAME_START, ST_DYN_INSTR_READ ...</code>, <code>typedef enum ... { StIdle, StFrameStart, StDynInstrRead...</code>. A collection of arbitrary values, could be either convention.</td>
</tr>
</tbody>
</table>
<p>The units for a constant should be described in the symbol name, unless the
constant is unitless or the units are &quot;bits.&quot; For example, <code>FooLengthBytes</code>.</p>
<p>Example:</p>
<p>&#x1F44D;
```verilog {.good}
// package-scope
package my_pkg;</p>
<p>  parameter int unsigned NUM_CPU_CORES = 64;
  // reference elsewhere as my_pkg::NUM_CPU_CORES</p>
<p>endpackage</p>
<pre class="language-"><code>
#### Parameterized Objects (modules, etc.)

***Use `parameter` to parameterize, and `localparam` to declare
module-scoped constants. Within a package, use `parameter`.***

You can create parameterized modules, classes, and interfaces to facilitate
design re-use.

Use the keyword `parameter` within the `module` declaration of a parameterized
module to indicate what parameters the user is expected to tune at
instantiation. The preferred naming convention for all parameters is
`UpperCamelCase`. Some projects may choose to use `ALL_CAPS` to differentiate
tuneable parameters from constants.

Derived parameters within the `module` declaration should use `localparam`.
An example is shown below.

```verilog
module modname #(
  parameter  int Depth  = 2048,         // 8kB default
  localparam int Aw     = $clog2(Depth) // derived parameter
) (
  ...
);

endmodule
</code></pre><p><code>`define</code> and <code>defparam</code> should never be used to parameterize a module.</p>
<p>Use <a href="#constants">package parameters</a> to transmit global constants through a
hierarchy instead of parameters. To declare a constant whose scope is internal
to the particular Verilog module, <a href="#constants">use <code>localparam</code> instead</a>.</p>
<p>Examples of when to use parameterized modules:</p>
<ul>
<li>When multiple instances of a module will be instantiated, and need to be
differentiated by a parameter.</li>
<li>As a means of specializing a module for a specific bus width.</li>
<li>As a means of documenting which global parameters are permitted to change
within the module.</li>
</ul>
<p>Explicitly declare the type for parameters.</p>
<p>Use the type of the parameter to help constrain the legal range. E.g. <code>int
unsigned</code> for general non-negative integer values, <code>bit</code> for boolean values.
Any further restrictions on tuneable parameter values must be documented with
assertions.</p>
<p>Tuneable parameter values should always have reasonable defaults.</p>
<p>For additional reading, see <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-884-complex-digital-systems-spring-2005/related-resources/parameter_models.pdf" target="_blank">New Verilog-2001 Techniques for Creating
Parameterized
Models</a>.</p>
<h3 id="macro-definitions">Macro Definitions</h3>
<p><strong><em>Macros should be ALL_CAPITALS with underscores.</em></strong></p>
<p>Macros should be all capitals with underscores.</p>
<p>A <strong>global define</strong> is a tick-defined macro in a header file that is shared by
all source files in a project. To reduce namespace collisions, global defines
should be prefixed by the name of a group of related macros, followed by a pair
of underscores:</p>
<pre class="language-"><code class="lang-verilog"><span class="token comment">// The following two constants are in the FOO namespace of the</span>
<span class="token comment">// SN chip.</span>
<span class="token constant">`define</span> SN_FOO__ALPHA_BETA  <span class="token number">5</span>
<span class="token constant">`define</span> SN_FOO__GAMMA_OMEGA <span class="token number">6</span>
</code></pre>
<p>A <strong>local define</strong> is a tick-defined macro that should only be used within the
scope of a single local file. It must be explicitly undefined after use, to
avoid polluting the global macro namespace. To indicate that a macro is only
meant to be used in the local scope, the macro name should be prefixed with a
single underscore.</p>
<p>To ensure that local defines stay local, be careful not to <code>`include</code> other
files between the macro definition and <code>`undef</code>.</p>
<p>Example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token constant">`define</span> <span class="token function">_MAKE_THING</span><span class="token punctuation">(</span>_x<span class="token punctuation">)</span> \
    thing i_thing_##_x <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span>i##_x<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token function">o</span><span class="token punctuation">(</span>o##_x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">`_MAKE_THING</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token constant">`_MAKE_THING</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token constant">`_MAKE_THING</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token constant">`undef</span> _MAKE_THING
</code></pre>
<h3 id="suffixes">Suffixes</h3>
<p>Suffixes are used in several places to give guidance to intent. The following
table lists the suffixes that have special meaning.</p>
<table>
<thead>
<tr>
<th>Suffix(es)</th>
<th style="text-align:center">Arena</th>
<th>Intent</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_e</code></td>
<td style="text-align:center">typedef</td>
<td>Enumerated types</td>
</tr>
<tr>
<td><code>_t</code></td>
<td style="text-align:center">typedef</td>
<td>Other typedefs, including signal clusters</td>
</tr>
<tr>
<td><code>_n</code></td>
<td style="text-align:center">signal name</td>
<td>Active low signal</td>
</tr>
<tr>
<td><code>_n</code>, <code>_p</code></td>
<td style="text-align:center">signal name</td>
<td>Differential pair, active low and active high</td>
</tr>
<tr>
<td><code>_d</code>, <code>_q</code></td>
<td style="text-align:center">signal name</td>
<td>Input and output of register</td>
</tr>
<tr>
<td><code>_q2</code>,<code>_q3</code>, etc</td>
<td style="text-align:center">signal name</td>
<td>Pipelined versions of signals; <code>_q</code> is one cycle of latency, <code>_q2</code> is two cycles, <code>_q3</code> is three, etc</td>
</tr>
<tr>
<td><code>_i</code>, <code>_o</code>, <code>_io</code></td>
<td style="text-align:center">signal name</td>
<td>Module inputs, outputs, and bidirectionals</td>
</tr>
</tbody>
</table>
<p>When multiple suffixes are necessary use the following guidelines:</p>
<ul>
<li>Guidance suffixes are added together and not separated by additional <code>_</code>
characters (<code>_ni</code> not <code>_n_i</code>)</li>
<li>If the signal is active low <code>_n</code> will be the first suffix</li>
<li>If the signal is a module input/output the letters will come last.</li>
<li>It is not mandatory to propagate <code>_d</code> and <code>_q</code> to module boundaries.</li>
</ul>
<p>Example:</p>
<p>&#x1F44D;
```verilog {.good}
module simple (
  input        clk_i,
  input        rst_ni,              // Active low reset</p>
<p>  // writer interface
  input [15:0] data_i,
  input        valid_i,
  output       ready_o,</p>
<p>  // bi-directional bus
  inout [7:0]  driver_io,         // Bi directional signal</p>
<p>  // Differential pair output
  output       lvds_po,           // Positive part of the differential signal
  output       lvds_no            // Negative part of the differential signal
);</p>
<p>  logic valid_d, valid_q, valid_q2, valid_q3;
  assign valid_d = valid_i; // next state assignment</p>
<p>  always_ff @(posedge clk or negedge rst_ni) begin
    if (!rst_ni) begin
      valid_q  &lt;= &apos;0;
      valid_q2 &lt;= &apos;0;
      valid_q3 &lt;= &apos;0;
    end else begin
      valid_q  &lt;= valid_d;
      valid_q2 &lt;= valid_q;
      valid_q3 &lt;= valid_q2;
    end
  end</p>
<p>  assign ready_o = valid_q3; // three clock cycles delay</p>
<p>endmodule // simple</p>
<pre class="language-"><code>
### Enumerations

***Name enumeration types `snake_case_e`.  Name enumeration values `ALL_CAPS` or
`UpperCamelCase`.***

Always name `enum` types using `typedef`. The storage type of any enumerated
type must be specified. For synthesizable enums, the storage type must be a
4-state data type (`logic` rather than `bit`).

Anonymous `enum` types are not allowed as they make it harder to use the type in
other places throughout the project and across projects.

Enumeration type names should contain only lower-case alphanumeric characters
and underscores. You must suffix enumeration type names with `_e`.

Enumeration value names (constants) should typically be `ALL_CAPS`, for example,
`READY_TO_SEND`, to reflect their constant nature, especially for truly unchangeable
values like defined opcode assignments.  There are times when `UpperCamelCase`
might be preferred, when the enumerated type&apos;s assigned value is effectively a
don&apos;t care to the designer, like state machine values.  See the conversation on
[constants](#constants) for a discussion on how to think of this recommendation.

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
typedef enum logic [7:0] {  // 8-bit opcodes
  OP_JALR = 8&apos;hA0,
  OP_ADDI = 8&apos;h47,
  OP_LDW  = 8&apos;h0B
} opcode_e;
opcode_e op_val;
</code></pre><p>&#x1F44D;
```verilog {.good}
typedef enum logic [1:0] {  // A 2-bit enumerated type
  ACC_WRITE,
  ACC_READ,
  ACC_PAUSE
} access_e; // new named type is created
access_e req_access, resp_access;</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
typedef enum logic [1:0] {  // A 2-bit enumerated type
  AccWrite,
  AccRead,
  AccPause
} access_e; // new named type is created
access_e req_access, resp_access;
</code></pre><p>&#x1F44E;
```verilog {.bad}
enum {  // Typedef is missing, storage type is missing.
  Write,
  Read
} req_access, resp_access; // anonymous enum type</p>
<pre class="language-"><code>
### Signal Naming

***Use `lower_snake_case` when naming signals.***

In this context, a **signal** is meant to mean a net, variable, or port within a
Verilog design.

Signal names may contain lowercase alphanumeric characters and underscores.

Signal names should never end with an underscore followed by a number (for
example, `foo_1`, `foo_2`, etc.). Many synthesis tools map buses into nets using
that naming convention, so similarly named nets can lead to confusion when
examining a synthesized netlist.

Reserved [Verilog](http://www.xilinx.com/support/documentation/sw_manuals/xilinx13_1/ite_r_verilog_reserved_words.htm) or Verilog keywords may never be used as names.

When interoperating with different languages, be mindful not to use keywords
from other languages.

#### Use descriptive names

***Names should describe what a signal&apos;s purpose is.***

Use whole words. Avoid abbreviations and contractions except in the most common
places. Favor descriptive signal names over brevity.

#### Prefixes

Use common prefixes to identify groups of signals that operate together. For
example, all elements of an AXI-S interface would share a prefix: `foo_valid`,
`foo_ready`, and `foo_data`.

Additionally, prefixes should be used to clearly label which signal is in which
clock group for any module with multiple clocks. See the section on [clock
domains](#clocks) for more details.

Examples:

-   Signals associated with controlling a blockram might share a `bram_` prefix.
-   Signals that are synchronous with `clk_dram` rather than `clk` should share
    a `dram_` prefix.

Code example:

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
module fifo_controller (
  input         clk_i,
  input         rst_ni,

  // writer interface
  input [15:0]  wr_data_i,
  input         wr_valid_i,
  output        wr_ready_o,

  // reader interface
  output [15:0] rd_data_o,
  output        rd_valid_o,
  output [7:0]  rd_fullness_o,
  input         rd_ack_i,

  // memory interface:
  output [7:0]  mem_addr_o,
  output [15:0] mem_wdata_o,
  output        mem_we_o,
  input  [15:0] mem_rdata_i
);
</code></pre><p>This naming convention makes it easier to map port names onto similar signal
names using simple and consistent rules. See the section on <a href="#hierarchical-consistency">Hierarchical
Consistency</a> for more information.</p>
<h4 id="hierarchical-consistency">Hierarchical consistency</h4>
<p><strong><em>The same signal should have the same name at any level of the hierarchy.</em></strong></p>
<p>A signal that connects to a port of an instance should have the same name as
that port. By proceeding in this manner, signals that are directly connected
should maintain the same name at any level of hierarchy.</p>
<p>Exceptions to this convention are expected, such as:</p>
<ul>
<li><p>When connecting a port to an element of an array of signals.</p>
</li>
<li><p>When mapping a generic port name to something more specific to the design.
For example, two generic blocks, one with a <code>host_bus</code> port and one with a
<code>device_bus</code> port might be connected by a <code>foo_bar_bus</code> signal.</p>
</li>
</ul>
<p>In each exceptional case, care should be taken to make the mapping of port names
to signal names as unambiguous and consistent as possible.</p>
<h3 id="clocks">Clocks</h3>
<p><strong><em>All clock signals must begin with <code>clk</code>.</em></strong></p>
<p>The main system clock for a design must be named <code>clk</code>. It is acceptable to use
<code>clk</code> to refer to the default clock that the majority of the logic in a module
is synchronous with.</p>
<p>If a module contains multiple clocks, the clocks that are not the system clock
should be named with a unique identifier, preceded by the <code>clk_</code> prefix. For
example: <code>clk_dram</code>, <code>clk_axi</code>, etc. Note that this prefix will be
used to identify other signals in that clock domain.</p>
<h3 id="resets">Resets</h3>
<p><strong><em>Resets are active-low and asynchronous. The default name is <code>rst_n</code>.</em></strong></p>
<p>Chip wide all resets are defined as active low and asynchronous. Thus they are
defined as tied to the asynchronous reset input of the associated standard
cell registers.</p>
<p>The default name is <code>rst_n</code>. If they must be distinguished by their clock, the
clock name should be included in the reset name like <code>rst_domain_n</code>.</p>
<p>Verilog allows either of the following syntax styles, but the style
guide prefers the former.</p>
<pre class="language-"><code class="lang-verilog"><span class="token comment">// preferred</span>
<span class="token important">always_ff @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rst_n<span class="token punctuation">)</span> <span class="token keyword">begin</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rst_n<span class="token punctuation">)</span> <span class="token keyword">begin</span>
    q <span class="token operator">&lt;=</span> <span class="token number">1&apos;b0</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
    q <span class="token operator">&lt;=</span> d<span class="token punctuation">;</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment">// legal but not preferred</span>
<span class="token important">always_ff @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">,</span> <span class="token keyword">negedge</span> rst_n<span class="token punctuation">)</span> <span class="token keyword">begin</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rst_n<span class="token punctuation">)</span> <span class="token keyword">begin</span>
    q <span class="token operator">&lt;=</span> <span class="token number">1&apos;b0</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
    q <span class="token operator">&lt;=</span> d<span class="token punctuation">;</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
<h2 id="language-features">Language Features</h2>
<h3 id="preferred-verilog-constructs">Preferred Verilog Constructs</h3>
<p>Use these Verilog constructs instead of their Verilog-2001 equivalents:</p>
<ul>
<li><code>always_comb</code> is required over <code>always @*</code>.</li>
<li><code>logic</code> is preferred over <code>reg</code> and <code>wire</code>.</li>
<li>Top-level <code>parameter</code> declarations are preferred over <code>`define</code> globals.</li>
</ul>
<h3 id="package-dependencies">Package Dependencies</h3>
<p><strong><em>Packages must not have cyclic dependencies.</em></strong></p>
<p>Package files may depend on constants and types in other package files, but
there must not be any cyclic dependencies. That is: if package A depends on a
constant from package B, package B must not depend on anything from package A.
While cyclic dependencies are permitted by the Verilog language
specification, their use can break some tools.</p>
<p>For example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">package</span> foo<span class="token punctuation">;</span>

  <span class="token comment">// Package &quot;bar&quot; must not depend on anything in &quot;foo&quot;:</span>
  <span class="token keyword">parameter</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> PageSizeBytes <span class="token operator">=</span> <span class="token number">16</span> <span class="token operator">*</span> bar<span class="token punctuation">:</span><span class="token punctuation">:</span>Kibi<span class="token punctuation">;</span>

<span class="token keyword">endpackage</span>
</code></pre>
<h3 id="module-declaration">Module Declaration</h3>
<p><strong><em>Use the Verilog-2001 full port declaration style, and use the format
below.</em></strong></p>
<p>Use the Verilog-2001 combined port and I/O declaration style. Do not use the
Verilog-95 list style. The port declaration in the module statement should fully
declare the port name, type, and direction.</p>
<p>The opening parenthesis should be on the same line as the module declaration,
and the first port should be declared on the following line.</p>
<p>The closing parenthesis should be on its own line, in column zero.</p>
<p>Indentation for module declaration follows the standard indentation
rule of two space indentation.</p>
<p>The clock port(s) must be declared first in the port list, followed by any and
all reset inputs.</p>
<p>Example without parameters:</p>
<p>&#x1F44D;
```verilog {.good}
module foo (
  input              clk_i,
  input              rst_ni,
  input [7:0]        d_i,
  output logic [7:0] q_o
);</p>
<pre class="language-"><code>
Example with parameters:

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
module foo #(
  parameter int unsigned Width = 8,
) (
  input                    clk_i,
  input                    rst_ni,
  input [Width-1:0]        d_i,
  output logic [Width-1:0] q_o
);
</code></pre><p>Do not use Verilog-95 style:</p>
<p>&#x1F44E;
```verilog {.bad}
// WRONG:
module foo(a, b, c d);
input wire [2:0] a;
output logic b;
...</p>
<pre class="language-"><code>
### Module Instantiation

***Use named ports to fully specify all instantiations.***

When connecting signals to ports for an instantiation, use the named port style,
like this:

```verilog
my_module i_my_instance (
  .clk_i (clk_i),
  .rst_ni(rst_ni),
  .d_i   (from_here),
  .q_o   (to_there)
);
</code></pre><p>If the port and the connecting signal have the same name, you can use the
<code>.port</code> syntax (without parentheses) to indicate connectivity. For example:</p>
<pre class="language-"><code class="lang-verilog">my_module i_my_instance <span class="token punctuation">(</span>
  <span class="token punctuation">.</span>clk_i<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>rst_ni<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>d_i   <span class="token punctuation">(</span>from_here<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>q_o   <span class="token punctuation">(</span>to_there<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>All declared ports must be present in the instantiation blocks. Unconnected
outputs must be explicitly written as no-connects (for example:
<code>.output_port()</code>), and unused inputs must be explicitly tied to ground (for
example: <code>.unused_input_port(8&apos;d0)</code>)</p>
<p><code>.*</code> is not permitted.</p>
<p>Do not use positional arguments to connect signals to ports.</p>
<p>Instantiate ports in the same order as they are defined in the module.</p>
<p>Align port expressions in <a href="#tabular-alignment">tabular style</a>.
Do not include whitespace before the opening parenthesis of the longest port name.
Do not include whitespace after the opening parenthesis, or before the closing parenthesis enclosing the port expression.</p>
<p>:-1:</p>
<pre class="language-"><code class="lang-verilog">mod <span class="token function">u_mod</span><span class="token punctuation">(</span>
  <span class="token punctuation">.</span>clk_i<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>rst_ni<span class="token punctuation">,</span>

  <span class="token comment">// Not allowed: avoid leading/trailing whitespace in expressions.</span>
  <span class="token punctuation">.</span><span class="token function">sig_1_i</span><span class="token punctuation">(</span> sig_1 <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token function">sig_2_i</span><span class="token punctuation">(</span> sig_2 <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

mod <span class="token function">u_mod</span><span class="token punctuation">(</span>
  <span class="token punctuation">.</span>clk_i<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>rst_ni<span class="token punctuation">,</span>

  <span class="token punctuation">.</span>short_sig_i                       <span class="token punctuation">(</span>sig_1<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// Not allowed: avoid whitespace between the longest signal name and the opening parenthesis.</span>
  <span class="token punctuation">.</span>a_very_long_signal_name_indeed_i  <span class="token punctuation">(</span>sig_2<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong><em>Use named parameters for all instantiations.</em></strong></p>
<p>When parameterizing an instance, specify the parameter using the named parameter
style. An exception is if there is only one parameter that is obvious such as
register width, then the instantiation can be implicit.</p>
<p>Indentation for module instantiation follows the standard indentation
rule of two space indentation.</p>
<pre class="language-"><code class="lang-verilog">my_module #<span class="token punctuation">(</span>
  <span class="token punctuation">.</span><span class="token function">Height</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token function">Width</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> my_module <span class="token punctuation">(</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

my_reg #<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> my_reg0 <span class="token punctuation">(</span>
  <span class="token punctuation">.</span>clk_i<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>rst_ni<span class="token punctuation">,</span>
  <span class="token punctuation">.</span>d_i   <span class="token punctuation">(</span>data_in<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span>q_o   <span class="token punctuation">(</span>data_out<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Do not specify parameters positionally, unless there is only one parameter and
the intent of that parameter is obvious, such as the width for a register
instance.</p>
<p>Do not use <code>defparam</code>.</p>
<p><strong><em>Do not instantiate recursively.</em></strong></p>
<p>Modules may not instantiate themselves recursively.</p>
<h3 id="constants">Constants</h3>
<p><strong><em>It is recommended to use symbolicly named constants instead of
raw numbers.</em></strong></p>
<p>Try to give commonly used constants symbolic names rather than repeatedly typing
raw numbers.</p>
<p>Local constants should always be declared using <code>localparam</code>.</p>
<p>Global constants should always be declared in a separate <code>.vh</code> or <code>.svh</code> include
file.</p>
<p>For Verilog code, global constants should always be declared as package
parameters. For Verilog-2001 compatible code, top-level parameters are not
supported and <code>`define</code> macros must be used instead.</p>
<p>Include the units for a constant as a suffix in the constant&apos;s symbolic name.
The exceptions to this rule are for constants that are inherently unitless, or
if the constant is describing the default unit type, &quot;bits.&quot;</p>
<p>Example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">localparam</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> INTERFACE_WIDTH <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span>  <span class="token comment">// Bits</span>
<span class="token keyword">localparam</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> INTERFACE_WIDTH_BYTES <span class="token operator">=</span> <span class="token punctuation">(</span>INTERFACE_WIDTH <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span class="token keyword">localparam</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> INTERFACE_WIDTH_64B_WORDS <span class="token operator">=</span> <span class="token punctuation">(</span>INTERFACE_WIDTH <span class="token operator">+</span> <span class="token number">63</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">64</span><span class="token punctuation">;</span>
<span class="token keyword">localparam</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> IMAGE_WIDTH_PIXELS <span class="token operator">=</span> <span class="token number">640</span><span class="token punctuation">;</span>
<span class="token keyword">localparam</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> MEGA <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>  <span class="token comment">// Unitless</span>
<span class="token keyword">localparam</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> MEBI <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>  <span class="token comment">// Unitless</span>
<span class="token keyword">localparam</span> <span class="token keyword">int</span> <span class="token keyword">unsigned</span> SYSTEM_CLOCK_HZ <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">*</span> MEGA<span class="token punctuation">;</span>
</code></pre>
<h3 id="signal-widths">Signal Widths</h3>
<p><strong><em>Be careful about signal widths.</em></strong></p>
<h4 id="always-be-explicit-about-the-widths-of-number-literals">Always be explicit about the widths of number literals.</h4>
<p>Examples:</p>
<p>&#x1F44D;
```verilog {.good}
localparam logic [3:0] bar = 4&apos;d4;</p>
<p>assign foo = 8&apos;d2;</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
localparam logic [3:0] bar = 4;

assign foo = 2;
</code></pre><p>Exceptions:</p>
<ul>
<li>When using parameterized widths, it is acceptable to simply use <code>1&apos;b1</code> (e.g.
when incrementing) rather than contrivances such as
{<code>{(Bus_width-1){1&apos;b0}}, 1&apos;b1</code>}. Alternately it could be written as <code>Bus_width&apos;(1)</code>.</li>
<li>It is acceptable to use the <code>&apos;0</code> construct to create an automatic correctly
sized zero.</li>
<li>Literals assigned to integer variants (e.g. byte, shortint, int, integer,
and longint) do not need an explicit width.</li>
</ul>
<h4 id="port-connections-on-module-instances-must-always-match-widths-correctly">Port connections on module instances must always match widths correctly.</h4>
<p>It is recommended to use explicit widths, rather than relying on Verilog&apos;s
implicit zero-extension and truncation operations, whenever practical.</p>
<p>Examples:</p>
<p>&#x1F44D;
```verilog {.good}
my_module i_module (
  .thirty_two_bit_input({16&apos;d0, sixteen_bit_word})
);</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
my_module i_module (
  // Incorrectly implicitly extends from 16 bit to 32 bit
  .thirty_two_bit_input(sixteen_bit_word)
);
</code></pre><h4 id="do-not-use-multi-bit-signals-in-a-boolean-context">Do not use multi-bit signals in a boolean context.</h4>
<p>Rather than letting boolean operations and if expressions reduce a multi-bit
signal to a single bit, explicitly compare the multi-bit signal to 0. The
implicit conversion can hide subtle logic bugs.</p>
<p>Examples;</p>
<p>&#x1F44D;
```verilog {.good}
logic [3:0] a, b;
logic out;</p>
<p>assign out = (a != &apos;0) &amp;&amp; (b == &apos;0);</p>
<p>always_comb begin
  if (a != &apos;0)
    ...
  else
    ...
end</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
logic [3:0] a, b;
logic out;

// Incorrect because it implicitly converts 4-bit signals to 1-bit before AND.
// Also, !b is different from ~b and can be hard to catch.
assign out = a &amp;&amp; !b;

// Incorrect use of a multi-bit signal in an if expression
always_comb begin
  if (a)
    ...
  else
    ...
end
</code></pre><h4 id="bit-slicing">Bit Slicing</h4>
<p>Only use the bit slicing operator when the intent is to refer to a portion of a
bit vector.</p>
<p>Examples:</p>
<p>&#x1F44D;
```verilog {.good}
logic [7:0] a, b;
logic [6:0] c;</p>
<p>assign a = 8&apos;d7;       // good</p>
<p>assign a[7:1] = 7&apos;d5;  // good - it&apos;s partial assignment.
assign a = b;          // good - the parser would warn on width mismatch.</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
logic [7:0] a, b;

assign a[7:0] = 8&apos;d7;  // BAD - redundant and can mask linter warnings.
assign a = b[7:0];     // BAD - redundant and masks linter warnings.
</code></pre><h4 id="handling-width-overflow">Handling Width Overflow</h4>
<p>Beware of shift operations, which can produce a result wider than the operand.
Bit-selection and concatenation may be clearer than shifting by a constant
amount.</p>
<p>Addition and negation operations produce a result one bit wider than the
operands, due to carry. An allowable exception to the rule about matching widths
is to silently drop the carry on assignment.</p>
<p>Example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> cnt_d<span class="token punctuation">,</span> cnt_q<span class="token punctuation">;</span>
<span class="token keyword">assign</span> cnt_d <span class="token operator">=</span> cnt_q <span class="token operator">+</span> <span class="token number">4&apos;h1</span><span class="token punctuation">;</span>
</code></pre>
<p>Or you may explicitly express dropping the carry by using size casting.</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">assign</span> cnt_d <span class="token operator">=</span> <span class="token number">4</span>&apos;<span class="token punctuation">(</span>cnt_q <span class="token operator">+</span> <span class="token number">4&apos;h1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="blocking-and-non-blocking-assignments">Blocking and Non-blocking Assignments</h3>
<p><strong><em>Sequential logic must use non-blocking assignments.  Combinational
blocks must use blocking assignments.</em></strong></p>
<p>Never mix assignment types within a block declaration.</p>
<p>A sequential block (a block that latches state on a clock edge) must exclusively
use non-block assignments, as defined in the Sequential Logic section below.</p>
<p>Purely combinational blocks must exclusively use blocking assignments.</p>
<p>This is one of Cliff Cumming&apos;s <a href="http://www.ece.cmu.edu/~ece447/s13/lib/exe/fetch.php?media=synth-verilog-cummins.pdf" target="_blank">Golden Rules of
Verilog</a>.</p>
<h3 id="delay-modeling">Delay Modeling</h3>
<p><strong><em>Do not use <code>#delay</code> in synthesizable design modules.</em></strong></p>
<p>Synthesizable design modules must be designed around a zero-delay simulation
methodology. All forms of <code>#delay</code>, including <code>#0</code>, are not permitted.</p>
<p>See Cliff Cumming&apos;s <a href="http://www.sunburst-design.com/papers/CummingsSNUG2002Boston_NBAwithDelays.pdf" target="_blank">Verilog Nonblocking Assignments With Delays, Myths &amp;
Mysteries</a>
for details.</p>
<h3 id="sequential-logic-latches">Sequential Logic (Latches)</h3>
<p><strong><em>The use of latches is discouraged - use flip-flops when possible.</em></strong></p>
<p>Unless absolutely necessary, use flops/registers instead of latches.</p>
<p>If you must use a latch, use <code>always_latch</code> over <code>always</code>, and use non-blocking
assignments (<code>&lt;=</code>). Never use blocking assignments (<code>=</code>).</p>
<h3 id="sequential-logic-registers">Sequential Logic (Registers)</h3>
<p><strong><em>Use the standard format for declaring sequential blocks.</em></strong></p>
<p>In a sequential always block, only use non-blocking assignments (<code>&lt;=</code>). Never
use blocking assignments (<code>=</code>).</p>
<p>Designs that mix blocking and non-blocking assignments for registers simulate
incorrectly because some simulators process some of the blocking assignments in
an always block as occurring in a separate simulation event as the non-blocking
assignment. This process makes some signals jump registers, potentially leading
to total protonic reversal. That&apos;s bad.</p>
<p>Sequential statements for state assignments should only contain reset values and
a next-state to state assignment, use a separate combinational-only block to
generate that next-state value.</p>
<p>A correctly implemented 8-bit register with an initial value of &quot;0xAB&quot; would be
implemented:</p>
<p>&#x1F44D;
```verilog {.good}
logic foo_en;
logic [7:0] foo_q, foo_d;</p>
<p>always_ff @(posedge clk or negedge rst_ni) begin
  if (!rst_ni) begin
    foo_q &lt;= 8&apos;hab;
  end else if (foo_en) begin
    foo_q &lt;= foo_d;
  end
end</p>
<pre class="language-"><code>
Do not allow multiple non-blocking assignments to the same bit.

Example:

<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
if (cond1) begin
  abc &lt;= 4&apos;h1;
end

if (cond2) begin
  abc &lt;= 4&apos;h2;
end
</code></pre><p>If both cond1 and cond2 are true, the Verilog standard says that the second
assignment will take effect, but this is a style violation.</p>
<p>Even if <code>cond1</code> and <code>cond2</code> are mutually exclusive, make the second <code>if</code> into an
<code>else if</code>.</p>
<p>Exception: It is fine to set default values first, then specific values.
However, it is preferred to do this work in a separate combinational block with
explicit blocking assignments.</p>
<p>Example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token important">always_ff @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rst_ni<span class="token punctuation">)</span> <span class="token keyword">begin</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rst_ni<span class="token punctuation">)</span> <span class="token keyword">begin</span>
    state_q <span class="token operator">&lt;=</span> StIdle<span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
    state_q <span class="token operator">&lt;=</span> state_d<span class="token punctuation">;</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token important">always_comb</span> <span class="token keyword">begin</span>
  state_d <span class="token operator">=</span> state_q<span class="token punctuation">;</span>    <span class="token comment">// default assignment next state is present state</span>
  <span class="token keyword">unique</span> <span class="token keyword">case</span> <span class="token punctuation">(</span>state_q<span class="token punctuation">)</span>
    StIdle<span class="token punctuation">:</span> state_d <span class="token operator">=</span> StInit<span class="token punctuation">;</span>       <span class="token comment">// Idle State move to Init</span>
    StInit<span class="token punctuation">:</span> <span class="token keyword">begin</span>                   <span class="token comment">// Initialize calculation</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>conditional<span class="token punctuation">)</span> <span class="token keyword">begin</span>
        state_d <span class="token operator">=</span> StIdle<span class="token punctuation">;</span>
      <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
        state_d <span class="token operator">=</span> StCalc<span class="token punctuation">;</span>
      <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    StCalc<span class="token punctuation">:</span> <span class="token keyword">begin</span>                   <span class="token comment">// Perform calculation</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>conditional<span class="token punctuation">)</span> <span class="token keyword">begin</span>
        state_d <span class="token operator">=</span> StResult<span class="token punctuation">;</span>
      <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    StResult<span class="token punctuation">:</span> state_d <span class="token operator">=</span> Idle<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">;</span>
  <span class="token keyword">endcase</span>
<span class="token keyword">end</span>
</code></pre>
<p>Keep work in sequential blocks simple. If a sequential block becomes
sufficiently complicated, consider splitting the combinational logic into a
separate combinational (<code>always_comb</code>) block. Ideally, sequential blocks should
contain only a register instantiation, with perhaps a load enable or an
increment.</p>
<h3 id="dont-cares-xs">Don&apos;t Cares (<code>X</code>&apos;s)</h3>
<p><strong><em>The use of <code>X</code> literals in RTL code is strongly discouraged. RTL must not
assert <code>X</code> to indicate &quot;don&apos;t care&quot; to synthesis in any case.  In order to flag
and detect invalid conditions, rather than assign and propagate <code>X</code> values,
designs should fully define all signal values and make extensive use of SVAs to
indicate the invalid conditions.</em></strong></p>
<p>If not strictly controlled, the use of <code>X</code> assignments in RTL to flag invalid or
don&apos;t care conditions can lead to simulation/synthesis mismatches.</p>
<p>Instead of assigning and propagating <code>X</code> in order to flag and detect invalid
conditions, it is encouraged to make <strong>extensive use of SVAs</strong>. The added
benefits of this design practice are that:</p>
<ul>
<li>No special code style is required to properly propagate <code>X</code> conditions,</li>
<li>The chance of accidentally introducing simulation/synthesis mismatches is
systematically reduced,</li>
<li>Simulation fails quickly and less signal backtracking is needed to root-cause
bugs,</li>
<li>In several cases, formal property verification (FPV) can be used to prove
whether these SVAs can always be fulfilled,</li>
<li>In a security context, deterministic/defined behavior is desired, even for
illegal/invalid/unreachable input combinations (sometimes stated more tersely
as &quot;for security-critical designs, there are no don&apos;t-cares&quot;).</li>
</ul>
<p>The solution presented here has similarities with the approaches presented in
<a href="http://www.lcdm-eng.com/papers/snug04_assertiveX.pdf" target="_blank">&quot;Being Assertive With Your X&quot;</a>
by Don Mills.</p>
<p>Note that although don&apos;t cares can be used to indicate possible optimization
opportunities to the synthesis tool, it is debatable whether the gains in logic
reduction are significant enough to outweigh the possible synthesis mismatch
issues that the use of <code>X</code> literals may entail (especially with the gate-counts
available in today&apos;s technologies).</p>
<h4 id="catching-errors-where-invalid-values-are-consumed">Catching errors where invalid values are consumed</h4>
<p>For an internally-generated signal that could be invalid (but not driven to <code>X</code>)
and is used to trigger some action (such as a register write-enable), it is
recommened to add an assert to check that when the enable is true, the signal is
valid. This triggers a simple to diagnose failure when an invalid value has been
accidentally used.</p>
<pre class="language-"><code class="lang-verilog">
<span class="token keyword">logic</span> reg_addr<span class="token punctuation">;</span>
<span class="token keyword">logic</span> reg_wr_en<span class="token punctuation">;</span>

<span class="token comment">// internal logic which generates reg_addr/reg_wr_en reg_en_addr will never</span>
<span class="token comment">// be X but must be ignored if reg_wr_en == 0</span>
<span class="token keyword">assign</span> reg_addr <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">assign</span> reg_wr_en <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">// trigger some specific action when a certain register is written</span>
<span class="token keyword">logic</span> special_reg_en<span class="token punctuation">;</span>

<span class="token keyword">assign</span> special_reg_en <span class="token operator">=</span> <span class="token punctuation">(</span>reg_addr <span class="token operator">==</span> SPECIAL_REG_ADDR<span class="token punctuation">)</span> <span class="token operator">&amp;</span> reg_wr_en<span class="token punctuation">;</span>

<span class="token comment">// Aim to keep RHS of implication as broad as possible</span>
<span class="token constant">`ASSERT</span><span class="token punctuation">(</span>NoSpecialRegEnWithoutRegEn<span class="token punctuation">,</span> special_reg_en <span class="token operator">|-&gt;</span> reg_wr_en<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Where the value and its validity signal are generated by a DV environment which
will drive <code>X</code> on invalid signals an <code>`ASSERT_KNOWN</code> suffices.</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">module</span> mymod <span class="token punctuation">(</span>
  <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> external_addr_i<span class="token punctuation">,</span>
  <span class="token keyword">input</span>       external_wr_en_i
<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">logic</span> special_action_en<span class="token punctuation">;</span>

  <span class="token keyword">assign</span> special_action_en <span class="token operator">=</span>
      <span class="token punctuation">(</span>external_addr_i <span class="token operator">==</span> SPECIAL_ADDR<span class="token punctuation">)</span> <span class="token operator">&amp;</span> external_wr_en_i<span class="token punctuation">;</span>

  <span class="token constant">`ASSERT_KNOWN</span><span class="token punctuation">(</span>special_action_en<span class="token punctuation">)</span>

<span class="token keyword">endmodule</span>
</code></pre>
<h4 id="specific-guidance-on-case-statements-and-ternaries">Specific Guidance on Case Statements and Ternaries</h4>
<p>To comply with this style, RTL must place <code>`ASSERT_KNOWN</code> assertions on all
module outputs, with the exception of signals that may implicitly be <code>X</code> at the
beginning of the simulation, such as FIFO, SRAM or register file outputs.</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">module</span> mymod <span class="token punctuation">(</span>
  <span class="token keyword">input</span>        ina_i<span class="token punctuation">,</span>
  <span class="token keyword">input</span>        inb_i<span class="token punctuation">,</span>
  <span class="token keyword">output</span> <span class="token keyword">logic</span> out_o
<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">assign</span> out_o <span class="token operator">=</span> ina_i <span class="token operator">^</span> inb_i<span class="token punctuation">;</span>
  <span class="token constant">`ASSERT_KNOWN</span><span class="token punctuation">(</span>OutKnown_A<span class="token punctuation">,</span> out_o<span class="token punctuation">,</span> clk_i<span class="token punctuation">,</span> <span class="token operator">!</span>rst_ni<span class="token punctuation">)</span>
<span class="token keyword">endmodule</span> <span class="token punctuation">:</span> mymod
</code></pre>
<p>Further, it is encouraged to add assertions to the signals forming conditions of
case statements, ternaries or if/else statements. The assertion style is at the
designer&apos;s discretion, and can range from simple <code>`ASSERT_KNOWN</code>  to fully
functional assertions, as shown in the following examples:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">{</span>mode0<span class="token punctuation">,</span> mode1<span class="token punctuation">,</span> mode2<span class="token operator">}</span> state_e<span class="token punctuation">;</span>
state_e sel<span class="token punctuation">;</span>

<span class="token comment">// encouraged</span>
<span class="token constant">`ASSERT_KNOWN</span><span class="token punctuation">(</span>SelKnown_A<span class="token punctuation">,</span> sel<span class="token punctuation">)</span>
<span class="token important">always_comb</span> <span class="token keyword">begin</span>
  out0 <span class="token operator">=</span> &apos;<span class="token number">0</span><span class="token punctuation">;</span>
  out1 <span class="token operator">=</span> &apos;<span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">unique</span> <span class="token keyword">case</span> <span class="token punctuation">(</span>sel<span class="token punctuation">)</span>
    mode1<span class="token punctuation">:</span> out0 <span class="token operator">=</span> foo<span class="token punctuation">;</span>
    mode2<span class="token punctuation">:</span> out1 <span class="token operator">=</span> bar<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">;</span>
  <span class="token keyword">endcase</span>
<span class="token keyword">end</span>

<span class="token comment">// optional, but more explicit</span>
<span class="token comment">// not always applicable</span>
<span class="token constant">`ASSERT</span><span class="token punctuation">(</span>MainFsmCase_A<span class="token punctuation">,</span> sel <span class="token keyword">inside</span> <span class="token operator">{</span>mode0<span class="token punctuation">,</span> mode1<span class="token punctuation">,</span> mode2<span class="token operator">}</span><span class="token punctuation">,</span> clk_i<span class="token punctuation">,</span> <span class="token operator">!</span>rst_ni<span class="token punctuation">)</span>
<span class="token important">always_comb</span> <span class="token keyword">begin</span>
  out0 <span class="token operator">=</span> &apos;<span class="token number">0</span><span class="token punctuation">;</span>
  out1 <span class="token operator">=</span> &apos;<span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">unique</span> <span class="token keyword">case</span> <span class="token punctuation">(</span>sel<span class="token punctuation">)</span>
    mode1<span class="token punctuation">:</span> out0 <span class="token operator">=</span> foo<span class="token punctuation">;</span>
    mode2<span class="token punctuation">:</span> out1 <span class="token operator">=</span> bar<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">;</span>
  <span class="token keyword">endcase</span>
<span class="token keyword">end</span>
</code></pre>
<p>In the context of ternary statements, the following are encouraged examples:</p>
<pre class="language-"><code class="lang-verilog"><span class="token comment">// encouraged</span>
<span class="token constant">`ASSERT_KNOWN</span><span class="token punctuation">(</span>ModeKnown_A<span class="token punctuation">,</span> mode_i<span class="token punctuation">,</span> clk_i<span class="token punctuation">,</span> <span class="token operator">!</span>rst_ni<span class="token punctuation">)</span>
<span class="token constant">`ASSERT_KNOWN</span><span class="token punctuation">(</span>LenKnown_A<span class="token punctuation">,</span> len_i<span class="token punctuation">,</span> clk_i<span class="token punctuation">,</span> <span class="token operator">!</span>rst_ni<span class="token punctuation">)</span>
<span class="token comment">// assign &apos;0 for all other combinations</span>
<span class="token keyword">assign</span> val <span class="token operator">=</span> <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> ENC<span class="token punctuation">)</span>                    <span class="token operator">?</span> <span class="token number">8&apos;h01</span> <span class="token punctuation">:</span>
             <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> DEC <span class="token operator">&amp;&amp;</span> len_i <span class="token operator">==</span> LEN128<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">8&apos;h36</span> <span class="token punctuation">:</span>
             <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> DEC <span class="token operator">&amp;&amp;</span> len_i <span class="token operator">==</span> LEN192<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">8&apos;h80</span> <span class="token punctuation">:</span>
             <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> DEC <span class="token operator">&amp;&amp;</span> len_i <span class="token operator">==</span> LEN256<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">8&apos;h40</span> <span class="token punctuation">:</span> <span class="token number">8&apos;h00</span><span class="token punctuation">;</span>

<span class="token comment">// optional, but more explicit</span>
<span class="token constant">`ASSERT</span><span class="token punctuation">(</span>ValSelValid_A<span class="token punctuation">,</span> mode_i <span class="token operator">==</span> ENC <span class="token operator">||</span> mode_i <span class="token operator">==</span> DEC <span class="token operator">&amp;&amp;</span>
    len_i <span class="token keyword">inside</span> <span class="token operator">{</span>LEN128<span class="token punctuation">,</span> LEN192<span class="token punctuation">,</span> LEN256<span class="token operator">}</span><span class="token punctuation">,</span> clk_i<span class="token punctuation">,</span> <span class="token operator">!</span>rst_ni<span class="token punctuation">)</span>
<span class="token comment">// using one of the valid outputs for other combinations (saves logic)</span>
<span class="token keyword">assign</span> val <span class="token operator">=</span> <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> ENC<span class="token punctuation">)</span>                    <span class="token operator">?</span> <span class="token number">8&apos;h01</span> <span class="token punctuation">:</span>
             <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> DEC <span class="token operator">&amp;&amp;</span> len_i <span class="token operator">==</span> LEN128<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">8&apos;h36</span> <span class="token punctuation">:</span>
             <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> DEC <span class="token operator">&amp;&amp;</span> len_i <span class="token operator">==</span> LEN192<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">8&apos;h80</span> <span class="token punctuation">:</span>
             <span class="token punctuation">(</span>mode_i <span class="token operator">==</span> DEC <span class="token operator">&amp;&amp;</span> len_i <span class="token operator">==</span> LEN256<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">8&apos;h40</span> <span class="token punctuation">:</span> <span class="token number">8&apos;h01</span><span class="token punctuation">;</span>
</code></pre>
<p>Note that there are cases where the input into a case or ternary could be <code>X</code>
but only under circumstances where it doesn&apos;t matter as the output will be
ignored as some valid signal that qualifies the input is not set. For example
the input may be fed directly from a memory or from a top-level input that a DV
environment drives to <code>X</code>. A plain <code>`ASSERT_KNOWN</code> will not work under these
circumstances and it is appropriate to use an assert with some qualifying valid
instead:</p>
<pre class="language-"><code class="lang-verilog"><span class="token constant">`ASSERT</span><span class="token punctuation">(</span>AddrKnownIfValid<span class="token punctuation">,</span> addr_valid <span class="token operator">|-&gt;</span> <span class="token operator">!</span><span class="token kernel-function property">$isunknown</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token important">always_comb</span> <span class="token keyword">begin</span>
  out <span class="token operator">=</span> &apos;<span class="token number">0</span>
  <span class="token keyword">unique</span> <span class="token keyword">case</span> <span class="token punctuation">(</span>addr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    ConstAddr1<span class="token punctuation">:</span> out <span class="token operator">=</span> foo<span class="token punctuation">;</span>
    ConstAddr2<span class="token punctuation">:</span> out <span class="token operator">=</span> bar<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>    out <span class="token operator">=</span> baz<span class="token punctuation">;</span>
  <span class="token keyword">endcase</span>
<span class="token keyword">end</span>
</code></pre>
<p>The aim should be to make the qualifying valid signal as wide reaching as
possible rather than narrowing down the <code>X</code> check more than is required:</p>
<p>&#x1F44E;
<code>``verilog {.bad}</code>ASSERT(AddrKnownIfValid,
  addr_valid &amp; internal_condition_1 &amp; internal_condition_2 |-&gt;
  !$isunknown(addr))</p>
<pre class="language-"><code>
#### Dynamic Array Indexing

It should be noted that dynamic array indexing operations can implicitly lead to
`X`. This should be avoided if possible by either aligning indexed arrays to
powers of 2 or by adding guarding if statements around the indexing operation.
These solutions are illustrated in the following examples.


<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
logic selected;
logic [3:0] idx;
logic [11:0] foo; // problematic

assign foo = {12&apos;b1010_1111_0000};
assign selected = foo[idx];
</code></pre><p>&#x1F44D;
```verilog {.good}
logic selected;
logic [3:0] idx;
logic [15:0] foo; // aligned to powers of two</p>
<p>assign foo = {4&apos;b0000, 12&apos;b1010_1111_0000};
assign selected = foo[idx];</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
logic selected;
logic [3:0] idx;
logic [11:0] foo;

assign foo = {12&apos;b1010_1111_0000};

// guarding if statement
assign selected = (idx &lt; $bits(foo)) ? foo[idx] : 1&apos;b0;
</code></pre><h3 id="combinational-logic">Combinational Logic</h3>
<p><strong><em>Avoid sensitivity lists, and use a consistent assignment type.</em></strong></p>
<p>Use <code>always_comb</code> for Verilog combinational blocks. Use <code>always @*</code> if
only Verilog-2001 is supported. Never explicitly declare sensitivity lists for
combinational logic.</p>
<p>Prefer assign statements wherever practical.</p>
<p>Example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">assign</span> final_value <span class="token operator">=</span> xyz <span class="token operator">?</span> value_a <span class="token punctuation">:</span> value_b<span class="token punctuation">;</span>
</code></pre>
<p>Where a case statement is needed, enclose it in its own <code>always_comb</code> block.</p>
<p>Synthesizable combinational logic blocks should only use blocking assignments.</p>
<p>Do not use three-state logic (<code>Z</code> state) to accomplish on-chip logic such as
muxing.</p>
<p>Do not infer a latch inside a function, as this may cause a simulation /
synthesis mismatch.</p>
<h3 id="case-statements">Case Statements</h3>
<p><strong><em>Avoid case-modifying pragmas. <code>unique case</code> is the best
practice. Always define a default case.</em></strong></p>
<p>Never use either the <code>full_case</code> or <code>parallel_case</code> pragmas. These pragmas can
easily cause synthesis-simulation mismatches.</p>
<p>Here is an example of a style-compliant full case statement:</p>
<pre class="language-"><code class="lang-verilog"><span class="token important">always_comb</span> <span class="token keyword">begin</span>
  <span class="token keyword">unique</span> <span class="token keyword">casez</span> <span class="token punctuation">(</span>select<span class="token punctuation">)</span>
    <span class="token number">3&apos;b000</span><span class="token punctuation">:</span> operand <span class="token operator">=</span> accum0 <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token number">3&apos;b001</span><span class="token punctuation">:</span> operand <span class="token operator">=</span> accum0 <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token number">3&apos;b010</span><span class="token punctuation">:</span> operand <span class="token operator">=</span> accum1 <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token number">3&apos;b011</span><span class="token punctuation">:</span> operand <span class="token operator">=</span> accum1 <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token number">3&apos;b1??</span><span class="token punctuation">:</span> operand <span class="token operator">=</span> regfile<span class="token punctuation">[</span>select<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> operand <span class="token operator">=</span> &apos;<span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// assign a default</span>
  <span class="token keyword">endcase</span>
<span class="token keyword">end</span>
</code></pre>
<p>The <code>unique</code> prefix is recommended before all case statements, as it creates
simulation assertions that can catch certain mistakes. In some cases, <code>priority</code>
may be used instead of <code>unique</code>, though in such cases, cascaded ternary
structures should be the preferred way of representing priority encoders as
they are a more readable representation for priority encoders.</p>
<p>Be sure to use <code>unique case</code> correctly. In particular, make sure that:</p>
<ul>
<li><p>a <code>default:</code> statement is <strong>always</strong> included in order to avoid accidental
inference of latches, even if all cases are covered. In simulation, a case
expression that evaluates to <code>X</code> will not match any case and will behave as a
latch, leading to different behavior than synthesis if no default is specified.</p>
</li>
<li><p>if no default assignments are given before the case statement as shown in
the example above, any variables assigned in one case item must be assigned in
all case items, including the <code>default:</code>. Failing to do this can lead to a
simulation-synthesis mismatch as described in <a href="http://www.lcdm-eng.com/papers/snug12_Paper_final.pdf" target="_blank">Don Mills&apos; paper</a>.</p>
</li>
</ul>
<p>The following is a different example showing a style-compliant case statement
variant that is frequently used for describing the next-state logic of a finite
state machine. What is different from the previous example is that the default
assignments are put before the <code>unique case</code> block, thus making it possible to
omit common assignments in the individual cases further below. If it weren&apos;t for
the common default assignments before the case statement, all variables would
have to be assigned a value in all cases and in the <code>default:</code> in order to
prevent simulation-synthesis mismatches.</p>
<pre class="language-"><code class="lang-verilog"><span class="token important">always_comb</span> <span class="token keyword">begin</span>
  <span class="token comment">// common default assignments</span>
  state_d <span class="token operator">=</span> state_q<span class="token punctuation">;</span>
  outa <span class="token operator">=</span> <span class="token number">1&apos;b0</span><span class="token punctuation">;</span>
  outb <span class="token operator">=</span> <span class="token number">1&apos;b0</span><span class="token punctuation">;</span>
  outc <span class="token operator">=</span> <span class="token number">1&apos;b0</span><span class="token punctuation">;</span>

  <span class="token keyword">unique</span> <span class="token keyword">case</span> <span class="token punctuation">(</span>state_q<span class="token punctuation">)</span>
    Idle<span class="token punctuation">:</span> <span class="token keyword">begin</span>
      state_d <span class="token operator">=</span> Work<span class="token punctuation">;</span>
      outa <span class="token operator">=</span> in0<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    Work<span class="token punctuation">:</span> <span class="token keyword">begin</span>
      state_d <span class="token operator">=</span> Wait<span class="token punctuation">;</span>
      outb <span class="token operator">=</span> in1<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    Wait<span class="token punctuation">:</span> <span class="token keyword">begin</span>
      state_d <span class="token operator">=</span> Idle<span class="token punctuation">;</span>
      outc <span class="token operator">=</span> in2<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    <span class="token comment">// always include a default case</span>
    <span class="token comment">// empty default permissible due to defaults before case block</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">;</span>
  <span class="token keyword">endcase</span>
<span class="token keyword">end</span>
</code></pre>
<h4 id="wildcards-in-case-items">Wildcards in case items</h4>
<p>Use <code>case</code> if wildcard operator behavior is not needed.
Use <code>case inside</code> if wildcard operator behavior is needed.
Use <code>casez</code> if wildcard operator behavior is needed and Verilog-2001 compatibility is required.</p>
<p>When expressing a wildcard in a case item, use the &apos;?&apos; character since it more
clearly expresses the intent.</p>
<p><code>casex</code> should not be used. <code>casex</code> implements a symmetric wildcard operator
such that an <code>X</code> in the case expression may match one or more case items.
<code>casez</code> only treats high-impedance states (<code>Z</code> or <code>?</code>) as a wildcard, and
performs exact matches for undriven <code>X</code> inputs. While this does not completely
fix the problems with symmetric wildcard matching, it is harder to accidentally
produce a <code>Z</code> input than an <code>X</code> input, so this form is preferred.
<code>case inside</code> does not treat either <code>X</code> or <code>Z</code> in the case expression as a
wildcard, so this form is preferred over <code>casez</code>.</p>
<p>References:</p>
<ul>
<li>Don Mills, <a href="http://www.lcdm-eng.com/papers/snug12_Paper_final.pdf" target="_blank">Yet Another Latch and Gotchas Paper</a></li>
<li>Clifford Cummings, <a href="http://www.sunburst-design.com/papers/CummingsSNUG1999Boston_FullParallelCase_rev1_1.pdf" target="_blank">full_case parallel_case, the Evil Twins of Verilog Synthesis</a></li>
<li>Clifford Cummings, <a href="http://www.sunburst-design.com/papers/CummingsSNUG2005Israel_Verilog_UniquePriority.pdf" target="_blank">Verilog&apos;s priority &amp; unique</a></li>
<li>Sutherland, Mills, and Spear, <a href="http://www.lcdm-eng.com/papers/snug07_Verilog%20Gotchas%20Part2.pdf" target="_blank">Gotcha Again: More Subtleties in the Verilog and Verilog Standards That Every Engineer Should Know</a></li>
</ul>
<h3 id="generate-constructs">Generate Constructs</h3>
<p><strong><em>Always name your generated blocks.</em></strong></p>
<p>When using a generate construct, always explicitly name each block of generated
code. Name each possible outcome of the generating if statement, and name the
iterated block of a generating for statement.</p>
<p>This ensures that generated hierarchical signal names are consistent across
different tools.</p>
<p>Generate and all named code blocks should use <code>lower_snake_case</code>. A space should
be placed between <code>begin</code> and the code block name.</p>
<p>Example of a conditional generate construct:</p>
<p>&#x1F44D;
```verilog {.good}
if (TypeIsPosedge) begin : posedge_type
  always_ff @(posedge clk) foo &lt;= bar;
end else begin : negedge_type
  always_ff @(negedge clk) foo &lt;= bar;
end</p>
<pre class="language-"><code>
Example of a loop generate construct:

<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
for (genvar ii = 0; ii &lt; NumberOfBuses; ii++) begin : my_buses
  my_bus #(.index(ii)) i_my_bus (.foo(foo), .bar(bar[ii]));
end
</code></pre><p>Do not wrap a generate construct with an additional <code>begin</code> block.</p>
<p>Do not use generate regions <code>generate</code>, <code>endgenerate</code>.</p>
<h3 id="signed-arithmetic">Signed Arithmetic</h3>
<p><strong><em>Use the available signed arithmetic constructs wherever signed
arithmetic is used.</em></strong></p>
<p>When it&apos;s necessary to convert from unsigned to signed, use the <code>signed&apos;</code> cast
operator (<code>$signed</code> in Verilog-2001).</p>
<p>If any operand in a calculation is unsigned, Verilog implicitly casts all
operands to unsigned and generates a warning. There should not be any
signed-to-unsigned warnings from either the simulation or synthesis tools if all
unsigned variables are properly casted.</p>
<p>Example of implicit signed-to-unsigned casting:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">logic</span> <span class="token keyword">signed</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>  a<span class="token punctuation">;</span>
<span class="token keyword">logic</span>               incr<span class="token punctuation">;</span>
<span class="token keyword">logic</span> <span class="token keyword">signed</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> sum1<span class="token punctuation">,</span> sum2<span class="token punctuation">,</span> sum3<span class="token punctuation">;</span>
<span class="token keyword">initial</span> <span class="token keyword">begin</span>
  a <span class="token operator">=</span> <span class="token number">8</span>&apos;sh80<span class="token punctuation">;</span>                        <span class="token comment">// a = -128</span>
  incr <span class="token operator">=</span> <span class="token number">1&apos;b1</span><span class="token punctuation">;</span>
  sum1 <span class="token operator">=</span> a <span class="token operator">+</span> incr<span class="token punctuation">;</span>                   <span class="token comment">// bad:  sum1 = 16&apos;h0081 ( 129)</span>
  sum2 <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token keyword">signed</span>&apos;<span class="token punctuation">(</span><span class="token operator">{</span><span class="token number">1&apos;b0</span><span class="token punctuation">,</span> incr<span class="token operator">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// good: sum2 = 16&apos;hFF81 (-127)</span>
  sum3 <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">8</span>&apos;sh01<span class="token punctuation">;</span>                 <span class="token comment">// good: sum3 = sum2 (more straightforward)</span>
<span class="token keyword">end</span>
</code></pre>
<p>In the above example, the fact that <code>incr</code> is unsigned causes <code>a</code> to be
evaluated as unsigned as well. The <code>sum1</code> evaluation is surprising and is
flagged by a warning that should not be ignored.</p>
<h3 id="number-formatting">Number Formatting</h3>
<p><strong><em>Prefix printed binary numbers with <code>0b</code>. Prefix printed hexadecimal
numbers with <code>0x</code>. Do not use prefixes for decimal numbers.</em></strong></p>
<p>When formatting text representations of numbers for log files, make it clear
what data you are including.</p>
<p>Make the base of a printed number clear. Only print decimal numbers without
modifiers. Use a <code>0x</code> prefix for hexadecimal and <code>0b</code> prefix for binary.</p>
<p>Decode individual fields of large structures individually, instead of expecting
the user to manually decode raw values.</p>
<p>&#x1F44D;
```verilog {.good}
$display(&quot;0x%0x&quot;, some_hex_value);
$display(&quot;0b%0b&quot;, some_binary_value);
$display(&quot;%0d&quot;,   some_decimal_value);</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
$display(&quot;%0x&quot;,   some_hex_value);
$display(&quot;%0b&quot;,   some_binary_value);
$display(&quot;0d%0d&quot;, some_decimal_value);
</code></pre><p>When assigning constant values, it is preferred to use underscore notation for
hex or binary bit strengths of length beyond 8 for better readability. Zero
prepending is not required unless it improves readability. Declare constants in
the format (binary, hex, decimal) they are typically displayed in.</p>
<p>&#x1F44D;
```verilog {.good}
logic [15:0] val0, val1, val2;
logic [39:0] addr0, addr1;</p>
<p>always_comb begin
  val0 = 16&apos;h0;
  if (condition1) begin
    val1  = 16&apos;b0010_0011_0000_1101;
    val2  = 16&apos;b0010_1100_0000_0000;
    addr1 = 40&apos;h00_1fc0_0000;
    addr2 = 40&apos;h00_efc0_0000;
  end else begin
    val0  = 16&apos;hffff;
    val1  = 16&apos;b1010_0011_0110_1001;
    val2  = 16&apos;b1110_1100_1111_0110;
    addr1 = 40&apos;h40_8000_0000;
    addr2 = 40&apos;h41_c000_0000;
  end
end</p>
<pre class="language-"><code>
### Functions and Tasks

The following section applies to synthesizable RTL only. See the [Coding Style
Guide for Design Verification](DVCodingStyle.md) for DV usage.

***In synthesizable RTL the use of functions is allowed, provided they are declared
`automatic`. Tasks should not be used.***

Functions must be declared in either a package or inside a module. A package is
appropriate where the function relates to other definitions in the package and
could be useful to multiple modules (even if it&apos;s currently only used by one). A
module is appropriate where the function specifically relates to the internals
of that module.

Functions should aim to conceptually represent a reusable block of combinational
logic.

Storage types must be explicitly declared for all arguments and the function
return value. All types must be 4-state data types, either `logic` or types
derived from `logic` (such as appropriate `struct`, `enum` or `typedef` types).

Do not use `output`, `inout`, or `ref` on function arguments. All functions
should only consume inputs and produce one output. `input` is the default and is
not required on the function arguments.


<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
// - Doesn&apos;t have explicit storage type on `a` or `b` or return type
// - `b` being used as `output` argument
// - `input` not required on `a`
function automatic [2:0] foo(input [2:0] a, [2:0] b);
  b = b + 1;
  return a + b;
endfunction
</code></pre><p>&#x1F44E;
<code>``verilog {.bad}
// - Doesn&apos;t have explicit storage type on</code>a<code>,</code>b<code>or</code>c<code>// - Uses</code>output<code>on</code>c<code>// -</code>input<code>not required on</code>a<code>and</code>b`
function automatic logic [2:0] foo(input [2:0] a, input [2:0] b, output [2:0] c);
  c = a - b;
  return a + b;
endfunction</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
// - Uses 2-state data type `int` for `a`
function automatic logic [2:0] foo(int a, logic [2:0] b);
  return a + b;
endfunction
</code></pre><p>&#x1F44D;
```verilog {.good}
function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
 return a ^ b;
endfunction</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
typedef logic [2:0] bar_t;

typedef struct packed {
  logic [2:0] field;
} baz_t;

function automatic logic [2:0] foo(bar_t a, baz_t b);
  return a + b.field;
endfunction
</code></pre><p>Data should be returned from a function using an explicit <code>return result</code> style.
Do not use a <code>function_name = result</code> style.</p>
<p>&#x1F44E;
```verilog {.bad}
function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  if (a == 3&apos;d2) begin
    foo = b;
  end else begin
    foo = a ^ b;
  end
endfunction</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  logic [2:0] result;

  if (a == 3&apos;d2) begin
    result = b;
  end else begin
    result = a ^ b;
  end

  return result;
endfunction
</code></pre><p>All local variables must be assigned in all code paths, either through an
initial assignment or through the use of <code>else</code> and <code>default:</code> for <code>if</code> and
<code>case</code> statements.</p>
<p>&#x1F44D;
```verilog {.good}
function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  logic [2:0] local_var_1;
  logic [2:0] local_var_2;</p>
<p>  local_var_1 = 3&apos;d0;</p>
<p>  if (a == 0) begin
    local_var_1 = 3&apos;d2;
  end</p>
<p>  unique case(b)
    3&apos;d0:    local_var_2 = 3&apos;d1;
    3&apos;d1:    local_var_2 = 3&apos;d3;
    default: local_var_2 = 3&apos;d0;
  endcase</p>
<p>  return local_var_1 + local_var_2;
endfunction</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
function automatic logic [2:0] foo(logic [2:0] a, logic [2:0] b);
  logic [2:0] local_var_1;
  logic [2:0] local_var_2;

  if (a == 0) begin
    local_var_1 = 3&apos;d2;
  end

  unique case(b)
    3&apos;d0:    local_var_2 = 3&apos;d1;
    3&apos;d1:    local_var_2 = 3&apos;d3;
  endcase

  return local_var_1 + local_var_2;
endfunction
</code></pre><h3 id="problematic-language-features-and-constructs">Problematic Language Features and Constructs</h3>
<p>These language features are considered problematic and their use is discouraged
unless otherwise noted:</p>
<ul>
<li>Interfaces.</li>
<li>The <code>alias</code> statement.</li>
</ul>
<h4 id="floating-begin-end-blocks">Floating begin-end blocks</h4>
<p>The use of generate blocks other than <code>for</code> loop, <code>if</code>, or <code>case</code> generate
constructs is not LRM compliant. While such usage might be accepted by some
tools, this guide prohibits such &quot;bare&quot; generate blocks. Note that the similar
&quot;sequential block&quot; construct is LRM compliant and allowed.</p>
<p>&#x1F44E;
```verilog {.bad}
module foo (
  input bar,
  output foo
);
  begin // illegal generate block
    assign foo = bar;
  end
endmodule</p>
<pre class="language-"><code>
#### Hierarchical references

The use of hierarchical references in synthesizable RTL code is prohibited.
Certain synthesis tools indeed support hierarchical references, while some
tools error out and others may silently ignore them potentially leading to
simulation/synthesis mismatches.

An exemption to this is the case where the hierarchical references are guarded
by macros to remove them for synthesis, e.g., as part of Verilog
assertions (SVAs).

<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}

module mymod_int (
  input        in0_i,
  input        in1_i,
  input        in2_i,
  output logic out_o
);

  logic int;
  assign int   = in0_i &amp; in1_i;
  assign out_o = in2_i | int;

endmodule

module mymod (
  ...
);

  mymod_int u_mymod_int (
    .in0_i,
    .in1_i,
    .in2_i,
    .out_o
  );

  // Hierarchical references are prohibited in synthesizable RTL code.
  assign int_o = u_mymod_int.int;

endmodule
</code></pre><h2 id="design-conventions">Design Conventions</h2>
<h3 id="summary">Summary</h3>
<p>The key ideas in this section include:</p>
<ul>
<li>Declare all signals and use <code>logic</code>: <code>logic foo;</code></li>
<li>Packed arrays are little-endian: <code>logic [7:0] byte;</code></li>
<li>Unpacked arrays are big-endian: <code>byte_t arr[0:N-1];</code></li>
<li>Prefer to register module outputs.</li>
<li>Declare FSMs consistently.</li>
</ul>
<h3 id="declare-all-signals">Declare all signals</h3>
<p><strong><em>Do not rely on inferred nets.</em></strong></p>
<p>All signals <strong>must</strong> be explicitly declared before use. All declared signals
must specify a data type. A correct design contains no inferred nets.</p>
<h3 id="use-logic-for-synthesis">Use <code>logic</code> for synthesis</h3>
<p><strong><em>Use <code>logic</code> for synthesis. <code>wire</code> is allowed when necessary.</em></strong></p>
<p>All signals in synthesizable RTL must be implemented in terms of 4-state data
types. This means that all signals must ultimately be constructed of nets with
the storage type of <code>logic</code>. While Verilog does provide other data
primitives with 4-state storage (ie. <code>integer</code>), those primitives are prone to
misunderstandings and misuse.</p>
<p>For example:</p>
<p>&#x1F44D;
```verilog {.good}
logic signed [31:0] x_velocity;  // say what you mean: a signed 32-bit integer.
typedef logic [7:0] byte_t;</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
bit signed [63:0] stars_in_the_sky;  // 2-state logic doesn&apos;t belong in RTL
int grains_of_sand;  // Or wait, did I mean integer?  Easy to confuse!
</code></pre><p>It is permissible to use wire as a short-hand to both declare a net and perform
continuous assignment. Take care not to confuse continuous assignment with
initialization. For example:</p>
<p>&#x1F44D;
```verilog {.good}
wire [7:0] sum = a + b;  // Continuous assignment</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
logic [7:0] sum = a + b; // Initialization (not synthesizable)
</code></pre><p><code>sum</code> is initialized to sum of initial values of a and b.</p>
<p>&#x1F44D;
```verilog {.good}
logic [7:0] acc = &apos;0;    // Initialization (synthesizable on some FPGA tools)</p>
<pre class="language-"><code>
There are exceptions for places where `logic` is inappropriate. For example,
nets that connect to bidirectional (`inout`) ports must be declared with `wire`.
These exceptions should be justified with a short comment.

It is permissible for DV (Design Verification) to make use of 2-state
logic, but all interfaces between 4-state and 2-state signals must assert
a check for `X` on the 4-state net before resolving to a 2-state variable.

### Logical vs. Bitwise

***Prefer logical constructs for logical comparisons, bit-wise for data.***

Logical operators (`!`, `||`, `&amp;&amp;`, `==`, `!=`) should be used for all
constructs that are evaluating logic (true or false) values, such as
if clauses and ternary assignments.  Prefer bit-wise operators (`~`, `|`,
`&amp;`, `^`) for all data constructs, even if scalar. Exceptions can be made
where it is clear that the evaluated expression is to be used in a logical
context.

:+1:
```verilog {.good}
always_ff @(posedge clk_i or negedge rst_ni) begin
  if (!rst_ni) begin
    reg_q &lt;= &apos;0;
  end else begin
    reg_q &lt;= reg_d;
  end
end

always_comb begin
  if (bool_a || (bool_b &amp;&amp; !bool_c) begin
    x = 1&apos;b1;
  end else begin
    x = 1&apos;b0;
end

assign z = ((bool_a != bool_b) || bool_c) ? a : b;
assign y = (a &amp; ~b) | c;
</code></pre><p>:-1:
```verilog {.bad}
always_ff @(posedge clk_i or negedge rst_ni) begin
  if (~rst_ni) begin
    reg_q &lt;= &apos;0;
  end else begin
    reg_q &lt;= reg_d;
  end
end</p>
<p>always_comb begin
  if (bool_a | (bool_b &amp; ~bool_c) begin
    x = 1&apos;b1;
  end else begin
    x = 1&apos;b0;
end</p>
<p>assign z = ((bool_a ^ bool_b) | bool_c) ? a : b;
assign y = (a &amp;&amp; !b) || c;</p>
<pre class="language-"><code>
:+1:
```verilog
// allowed logical assignment for boolean test
assign request_valid = !fifo_empty &amp;&amp; data_available;

always_comb begin
  if (request_valid) begin
    output_valid = 1&apos;b1;
  end else begin
    output_valid = 1&apos;b0;
  end
end
</code></pre><h3 id="packed-ordering">Packed Ordering</h3>
<p><strong><em>Bit vectors and packed arrays must be little-endian.</em></strong></p>
<p>When declaring bit vectors and packed arrays, the index of the most-significant
bound (left of the colon) must be greater than or equal to the least-significant
bound (right of the colon).</p>
<p>This style of bit vector declaration keeps packed variables little-endian.</p>
<p>For example:</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">typedef</span> <span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> u8_t<span class="token punctuation">;</span>
<span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> u32_word<span class="token punctuation">;</span>
u8_t <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> u16_word<span class="token punctuation">;</span>
u8_t byte3<span class="token punctuation">,</span> byte2<span class="token punctuation">,</span> byte1<span class="token punctuation">,</span> byte0<span class="token punctuation">;</span>
<span class="token keyword">assign</span> u16_word <span class="token operator">=</span> <span class="token operator">{</span>byte1<span class="token punctuation">,</span> byte0<span class="token operator">}</span><span class="token punctuation">;</span>
<span class="token keyword">assign</span> u32_word <span class="token operator">=</span> <span class="token operator">{</span>byte3<span class="token punctuation">,</span> byte2<span class="token punctuation">,</span> u16_word<span class="token operator">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="unpacked-ordering">Unpacked Ordering</h3>
<p><strong><em>Unpacked arrays must be big-endian.</em></strong></p>
<p>Declare unpacked arrays in big-endian fashion (for instance, <code>[n:m]</code> where <code>n &lt;=
m</code>). Never declare an unpacked array in little-endian order, such as
<code>[size-1:0]</code>.</p>
<p>Declare zero-based unpacked arrays using the shorter notation <code>[size]</code>. It is
understood that <code>[size]</code> is equivalent to the big-endian declaration
<code>[0:size-1]</code>.</p>
<pre class="language-"><code class="lang-verilog"><span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> word_array<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> &apos;<span class="token operator">{</span>word0<span class="token punctuation">,</span> word1<span class="token punctuation">,</span> word2<span class="token operator">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="finite-state-machines">Finite State Machines</h3>
<p><strong><em>State machines use an enum to define states, and be implemented with
two process blocks: a combinational block and a clocked block.</em></strong></p>
<p>Every state machine description has three parts:</p>
<ol>
<li>An enum that declares and describes the states.</li>
<li>A combinational process block that decodes state to produce next state and
other combinational outputs.</li>
<li>A clocked process block that updates state from next state.</li>
</ol>
<p><em>Enumerating States</em></p>
<p>The enum statement for the state machine should list each state in the state
machine. Comments describing the states should be deferred to case statement in
the combinational process block, below.</p>
<p>States should be named in <code>UpperCamelCase</code>, like other
<a href="#enumerations">enumeration constants</a>.</p>
<p>Barring special circumstances, the initial idle state of the state
machines will be named <code>Idle</code> or <code>StIdle</code>. (Alternate names are acceptable
if they improve clarity.)</p>
<p>Ideally, each module should only contain one state machine. If your module needs
more than one state machine, you will need to add a unique prefix (or suffix) to
the states of each state machine, to distinguish which state is associated with
which state machine. For example, a module with a &quot;reader&quot; machine and a
&quot;writer&quot; machine might have a <code>StRdIdle</code> state and a <code>StWrIdle</code> state.</p>
<p><em>Combinational Decode of State</em></p>
<p>The combinational process block should contain:</p>
<ul>
<li>A case statement that decodes state to produce next state and combinational
outputs. For clarity, only cases where the output value deviates from the
default should be coded.</li>
<li>Before the case statement should be a block of code that defines default
values for every combinational output, including &quot;next state.&quot;</li>
<li>The default value for the &quot;next state&quot; variable should be the current state.
The case statement that decodes state will then only assign to &quot;next state&quot;
when transitioning between states.</li>
<li>Within the case statement, each state alternative should be preceded with a
comment that describes the function of that state within the state machine.</li>
</ul>
<p><em>The State Register</em></p>
<p>No logic except for reset should be performed in this process. The state
variable should latch the value of the &quot;next state&quot; variable.</p>
<p><em>Other Guidelines</em></p>
<p>When possible, try to choose state names that differ near the beginning of their
name, to make them more readable when viewing waveform traces.</p>
<p><em>Example</em></p>
<p>&#x1F44D;
```verilog {.good}
// Define the states
typedef enum {
  StIdle, StFrameStart, StDynInstrRead, StBandCorr, StAccStoreWrite, StBandEnd
} alcor_state_e;</p>
<p>alcor_state_e alcor_state_d, alcor_state_q;</p>
<p>// Combinational decode of the state
always_comb begin
  alcor_state_d = alcor_state_q;
  foo = 1&apos;b0;
  bar = 1&apos;b0;
  bum = 1&apos;b0;
  unique case (alcor_state_q)
    // StIdle: waiting for frame_start
    StIdle:
      if (frame_start) begin
        foo = 1&apos;b1;
        alcor_state_d = StFrameStart;
      end
    // StFrameStart: Reset accumulators
    StFrameStart: begin
      // ... etc ...
    end
    // may be empty or used to catch parasitic states
    default: alcor_state_d = StIdle;
  endcase
end</p>
<p>// Register the state
always_ff @(posedge clk or negedge rst_n) begin
  if (!rst_n) begin
    alcor_state_q &lt;= StIdle;
  end else begin
    alcor_state_q &lt;= alcor_state_d;
  end
end</p>
<pre class="language-"><code>
### Active-Low Signals

***The `_n` suffix indicates an active-low signal.***

If active-low signals are used, they must have the `_n` suffix in their
name. Otherwise, all signals are assumed to be active-high.

### Differential Pairs

***Use the `_p` and `_n` suffixes to indicate a differential pair.***

For example, `in_p` and `in_n` comprise a differential pair set.

### Delays

***Signals delayed by a single clock cycle should end in a `_q` suffix.***

If one signal is only a delayed version of another signal, the `_q` suffix
should be used to indicate this relationship.

If another signal is then delayed by another clock cycle, the next signal should
be identifed with the `_q2` suffix, and then `_q3` and so on.

Example:

```verilog
always_ff @(posedge clk) begin
  data_valid_q &lt;= data_valid_d;
  data_valid_q2 &lt;= data_valid_q;
  data_valid_q3 &lt;= data_valid_q2;
end
</code></pre><h3 id="wildcard-import-of-packages">Wildcard import of packages</h3>
<p>The wildcard import syntax, e.g. <code>import ip_pkg::*;</code> is only allowed where the
package is part of the same IP as the module that uses that package.  Wildcard
import statement must be placed in the module header or in the module body.</p>
<p>&#x1F44D;
```verilog {.good}
// mod_a_pkg.sv and mod_a.sv are in the same IP.
// Packages can be imported in the module declaration if access to
// unqualified types is needed in the port list.</p>
<p>// mod_a_pkg.sv
package mod_a_pkg;</p>
<p>  typedef struct packed {
    ...
  } a_req_t;
endpackage</p>
<p>// mod_a.sv
module mod_a
  import mod_a_pkg::*;
(
  ...
  a_req_t a_req,
  ...
);</p>
<p>endmodule</p>
<pre class="language-"><code>
<span class="token entity" title="&#x1F44D;">&amp;#x1f44d;</span>
```verilog {.good}
// mod_a
module mod_a ();

  // mod_a_pkg.sv and mod_a.sv are in the same IP.
  import mod_a_pkg::*;

  ...

  a_req_t a_req;

endmodule
</code></pre><p>Other than the cases above, wildcard imports are not allowed. For instance,
the example below may create a name collision in the module following <code>mod_a</code>
in the source list.</p>
<p>&#x1F44E;
```verilog {.bad}
// mod_a.sv
import mod_a_pkg::*; // not allowed: imported to $root scope.</p>
<p>module mod_a ();</p>
<p>endmodule</p>
<pre class="language-"><code>
Other bad examples:

<span class="token entity" title="&#x1F44E;">&amp;#x1f44e;</span>
```verilog {.bad}
// wildcard import for other packages outside of the IP
module mod_a import mod_b_pkg::*; ();
</code></pre><p>&#x1F44E;
```verilog {.bad}
module mod_a ();</p>
<p>  // not allowed: wildcard import of a package from a different IP
  import mod_b_pkg::*;</p>
<p>endmodule</p>
<pre class="language-"><code>
### Assertion Macros

It is encouraged to use Verilog assertions (SVAs) throughout the design to
check functional correctness and flag invalid conditions. In order to increase
productivity and keep the assertions short and concise, the following assertion
macros can be used:

```verilog
// immediate assertion, to be placed within a process.
`ASSERT_I(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>)
// immediate assertion wrapped within an initial block. can be used for things
// like parameter checking.
`ASSERT_INIT(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>)
// concurrent assertion to be used for functional assertions.
`ASSERT(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>clk</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reset</span> <span class="token attr-name">condition</span><span class="token punctuation">&gt;</span></span>)
// concurrent assertion that checks that a signal has a known value after reset
// (i.e. that the signal is not `X`).
`ASSERT_KNOWN(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>signal</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>clk</span><span class="token punctuation">&gt;</span></span>, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reset</span> <span class="token attr-name">condition</span><span class="token punctuation">&gt;</span></span>)
</code></pre><p>An implementation of these macros (including other useful variations thereof)
can be found here:
<a href="https://github.com/lowRISC/opentitan/blob/master/hw/ip/prim/rtl/prim_assert.sv" target="_blank">https://github.com/lowRISC/opentitan/blob/master/hw/ip/prim/rtl/prim_assert.sv</a></p>
<h4 id="a-note-on-security-critical-applications">A Note on Security Critical Applications</h4>
<p>For security critical applications, the names of the assertion macros involved
in guarding case statements and ternaries shall be postfixed with <code>_SEC</code>. This
enables security-specific post-processing of these statements at a later stage
in the design process. In terms of functionality these macros should be
identical to the original assertions, i.e.,</p>
<pre class="language-"><code class="lang-verilog"><span class="token constant">`define</span> ASSERT_SEC <span class="token constant">`ASSERT</span>
<span class="token constant">`define</span> ASSERT_I_SEC <span class="token constant">`ASSERT_I</span>
<span class="token constant">`define</span> ASSERT_KNOWN_SEC <span class="token constant">`ASSERT_KNOWN</span>
</code></pre>
<p>More security assertion and coding style guidance will be given in a separate
document, soon.</p>
<h2 id="appendix---condensed-style-guide">Appendix - Condensed Style Guide</h2>
<p>This is a short summary of the Comportable style guide. Refer to the main text
body for explanations examples, and exceptions.</p>
<h3 id="basic-style-elements">Basic Style Elements</h3>
<ul>
<li>Use Verilog-2012 conventions, files named as module.sv, one file
per module</li>
<li>Only ASCII, <strong>100</strong> chars per line, <strong>no</strong> tabs, <strong>two</strong> spaces per
indent for all paired keywords.</li>
<li>C++ style comments <code>//</code></li>
<li>For multiple items on a line, <strong>one</strong> space must separate the comma
and the next character</li>
<li>Include <strong>whitespace</strong> around keywords and binary operators</li>
<li><strong>No</strong> space between case item and colon, function/task/macro call
and open parenthesis</li>
<li>Line wraps should indent by <strong>four</strong> spaces</li>
<li><code>begin</code> must be on the same line as the preceding keyword and end
the line</li>
<li><code>end</code> must start a new line</li>
</ul>
<h3 id="construct-naming">Construct Naming</h3>
<ul>
<li>Use <strong>lower_snake_case</strong> for instance names, signals, declarations,
variables, types</li>
<li>Use <strong>UpperCamelCase</strong> for tunable parameters, enumerated value names</li>
<li>Use <strong>ALL_CAPS</strong> for constants and define macros</li>
<li>Main clock signal is named <code>clk</code>. All clock signals must start with <code>clk_</code></li>
<li>Reset signals are <strong>active-low</strong> and <strong>asynchronous</strong>, default name is
<code>rst_n</code></li>
<li>Signal names should be descriptive and be consistent throughout the
hierarchy</li>
</ul>
<h3 id="suffixes-for-signals-and-types">Suffixes for signals and types</h3>
<ul>
<li>Add <code>_i</code> to module inputs, <code>_o</code> to module outputs or <code>_io</code> for
bi-directional module signals</li>
<li>The input (next state) of a registered signal should have <code>_d</code> and
the output <code>_q</code> as suffix</li>
<li>Pipelined versions of signals should be named <code>_q2</code>, <code>_q3</code>, etc. to
reflect their latency</li>
<li>Active low signals should use <code>_n</code>. When using differential signals use
<code>_p</code> for active high</li>
<li>Enumerated types should be suffixed with <code>_e</code></li>
<li>Multiple suffixes will not be separated with <code>_</code>. <code>n</code> should come first
<code>i</code>, <code>o</code>, or <code>io</code> last</li>
</ul>
<h3 id="language-features">Language features</h3>
<ul>
<li>Use <strong>full port declaration style</strong> for modules, any clock and reset
declared first</li>
<li>Use <strong>named parameters</strong> for instantiation, all declared ports must
be present, no <code>.*</code></li>
<li>Top-level parameters is preferred over <code>`define</code> globals</li>
<li>Use <strong>symbolically named constants</strong> instead of raw numbers</li>
<li>Local constants should be declared <code>localparam</code>, globals in a separate
<strong>.svh</strong> file.</li>
<li><code>logic</code> is preferred over <code>reg</code> and <code>wire</code>, declare all signals
explicitly</li>
<li><code>always_comb</code>, <code>always_ff</code> and <code>always_latch</code> are preferred over <code>always</code></li>
<li>Interfaces are discouraged</li>
<li>Sequential logic must use <strong>non-blocking</strong> assignments</li>
<li>Combinational blocks must use <strong>blocking</strong> assignments</li>
<li>Use of latches is discouraged, use flip-flops when possible</li>
<li>The use of <code>X</code> assignments in RTL is strongly discouraged, make use of SVAs
to check invalid behavior instead.</li>
<li>Prefer <code>assign</code> statements wherever practical.</li>
<li>Use <code>unique case</code> and always define a <code>default</code> case</li>
<li>Use available signed arithmetic constructs wherever signed arithmetic
is used</li>
<li>When printing use <code>0b</code> and <code>0x</code> as a prefix for binary and hex. Use
<code>_</code> for clarity</li>
<li>Use logical constructs (i.e <code>||</code>) for logical comparison, bit-wise
(i.e <code>|</code>) for data comparison</li>
<li>Bit vectors and packed arrays must be little-endian, unpacked arrays
must be big-endian</li>
<li>FSMs: <strong>no logic</strong> except for reset should be performed in the process
for the state register</li>
<li>A combinational process should first define <strong>default value</strong> of all
outputs in the process</li>
<li>Default value for next state variable should be the current state </li>
</ul>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; Priself.zz@gmail.com 2023 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x7AE0;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2023-05-19 15:44:14
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev navigation-unique" aria-label="Previous page: README">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"SV代码风格","level":"1.2","depth":1,"next":{"title":"Ariane(cva6)","level":"2.1","depth":1,"ref":"","articles":[]},"previous":{"title":"README","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","katex","theme-default","expandable-chapters","chapter-fold","splitter","copy-code-button","-lunr","-search","search-pro","prism","-highlight","hide-element","alerts","fontsettings","tbfed-pagefooter"],"root":".","styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright © Priself.zz@gmail.com 2023","modify_label":"该文章修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"chapter-fold":{},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"splitter":{},"search-pro":{},"hide-element":{},"katex":{},"fontsettings":{"family":"sans","size":12,"theme":"white"},"alerts":{},"copy-code-button":{},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"expandable-chapters":{}},"theme":"default","author":"UnisLab-ic-group","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Blog","language":"zh-hans","output.name":"site","gitbook":"3.2.3","description":"学习的一些知识与心得"},"file":{"path":"blog/SV.md","mtime":"2023-05-19T07:44:14.456Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-05-19T07:44:32.607Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-alerts/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

